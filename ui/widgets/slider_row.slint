import { Theme } from "../styles.slint";
import { Slider } from "std-widgets.slint";
import { BaseSliderRow } from "base_setting_row.slint";

// A labeled slider with value display for settings
export component SliderRow inherits BaseSliderRow {
    in property <string> suffix: "";
    in property <float> minimum: 0;
    in property <float> maximum: 100;
    in-out property <float> value: 0;

    callback changed(float);

    // Memoize rounded value to avoid repeated Math.round() calls each frame
    property <int> rounded-value: Math.round(value);

    // Configure base slider row
    value-text: "\{rounded-value}" + suffix;
    use-accent-value-style: true;

    // Note: Container has no accessible-role; the Slider inside handles accessibility

    // Slider as direct child
    Slider {
        minimum: root.minimum;
        maximum: root.maximum;
        value <=> root.value;

        accessible-label: root.label;
        accessible-value: "\{root.rounded-value}" + root.suffix;
        accessible-value-minimum: root.minimum;
        accessible-value-maximum: root.maximum;

        changed(val) => {
            root.changed(val);
        }
    }
}

// Main window for niri-settings
//
// Property Organization:
// Properties are organized by category with flat naming convention.
// Struct types in styles.slint are used for models (AnimationConfig).

import { Button, VerticalBox, HorizontalBox, ScrollView } from "std-widgets.slint";
import { Theme, AnimationConfig, SearchResultItem, KeyPart, DiffLineItem, CategoryDiffItem } from "styles.slint";
import { SearchResultsPanel } from "widgets/search_results_panel.slint";
import { Sidebar, SidebarIndices } from "widgets/sidebar.slint";
import { CategoryNav } from "widgets/category_nav.slint";
import { SearchBar } from "widgets/search.slint";
import { SettingsSection, SettingRow } from "widgets/section.slint";
import { AppearancePage } from "pages/appearance.slint";
import { BehaviorPage } from "pages/behavior.slint";
import { KeyboardPage } from "pages/keyboard.slint";
import { MousePage } from "pages/mouse.slint";
import { TouchpadPage } from "pages/touchpad.slint";
import { DisplaysPage } from "pages/displays.slint";
import { CursorPage } from "pages/cursor.slint";
import { AnimationsPage } from "pages/animations.slint";
import { OverviewPage } from "pages/overview.slint";
import { LayoutExtrasPage } from "pages/layout_extras.slint";
import { GesturesPage } from "pages/gestures.slint";
import { MiscellaneousPage } from "pages/miscellaneous.slint";
import { WindowRulesPage } from "pages/window_rules.slint";
import { TrackpointPage } from "pages/trackpoint.slint";
import { TrackballPage } from "pages/trackball.slint";
import { TabletPage } from "pages/tablet.slint";
import { TouchPage } from "pages/touch.slint";
import { WorkspacesPage } from "pages/workspaces.slint";
import { LayerRulesPage } from "pages/layer_rules.slint";
import { KeybindingsPage, KeybindingItem } from "pages/keybindings.slint";
import { StartupPage } from "pages/startup.slint";
import { EnvironmentPage } from "pages/environment.slint";
import { DebugPage } from "pages/debug.slint";
import { SwitchEventsPage } from "pages/switch_events.slint";
import { ToolsPage } from "pages/tools.slint";
import { ConfigEditorPage } from "pages/config_editor.slint";
import { BackupsPage, BackupEntry } from "pages/backups.slint";
import { RecentWindowsPage } from "pages/recent_windows.slint";
import { FirstRunWizard } from "dialogs/first_run_wizard.slint";
import { MessageDialog, StatusNotification, DialogType } from "dialogs/error_dialog.slint";
import { ImportSummaryDialog } from "dialogs/import_summary.slint";
import { DiffViewDialog } from "dialogs/diff_view.slint";
import { ConsolidationDialog, ConsolidationItem } from "dialogs/consolidation_dialog.slint";

export component MainWindow inherits Window {
    title: "Niri Settings";
    min-width: 600px;
    min-height: 500px;
    preferred-width: 800px;
    preferred-height: 600px;
    background: Theme.background;

    in-out property <int> selected-category: 0;
    in-out property <string> search-text: "";

    // Search results
    in property <[SearchResultItem]> search-results: [];
    in-out property <bool> show-search-results: false;

    // Appearance settings
    in-out property <bool> focus-ring-enabled: true;
    in-out property <float> focus-ring-width: 4;
    in-out property <color> focus-ring-active-color: #7fc8ff;
    in-out property <color> focus-ring-inactive-color: #505050;
    in-out property <color> focus-ring-urgent-color: #ff5555;
    in-out property <string> focus-ring-active-hex: "#7fc8ff";
    in-out property <string> focus-ring-inactive-hex: "#505050";
    in-out property <string> focus-ring-urgent-hex: "#ff5555";
    in-out property <bool> border-enabled: false;
    in-out property <float> border-thickness: 1;
    in-out property <color> border-active-color: #ffffff;
    in-out property <color> border-inactive-color: #808080;
    in-out property <color> border-urgent-color: #ff5555;
    in-out property <string> border-active-hex: "#ffffff";
    in-out property <string> border-inactive-hex: "#808080";
    in-out property <string> border-urgent-hex: "#ff5555";
    in-out property <float> gaps-inner: 16;
    in-out property <float> gaps-outer: 8;
    in-out property <float> corner-radius: 12;
    in-out property <color> background-color: #1e1e2e;
    in-out property <string> background-color-hex: "#1e1e2e";

    // Behavior settings
    in-out property <bool> focus-follows-mouse: false;
    in-out property <bool> warp-mouse-to-focus: false;
    in-out property <bool> center-focused-column: false;
    in-out property <bool> always-center-single-column: false;
    in-out property <int> default-column-width-index: 0;
    in-out property <float> default-column-width-proportion: 0.5;
    in-out property <float> default-column-width-fixed: 800;
    in-out property <float> strut-left: 0;
    in-out property <float> strut-right: 0;
    in-out property <float> strut-top: 0;
    in-out property <float> strut-bottom: 0;
    in-out property <int> mod-key-index: 0;
    in-out property <bool> mod-key-nested-enabled: false;
    in-out property <int> mod-key-nested-index: 0;
    in-out property <bool> disable-power-key-handling: false;

    // Cursor settings
    in-out property <string> cursor-theme: "";
    in-out property <int> cursor-size: 24;
    in-out property <bool> hide-when-typing: false;
    in-out property <bool> hide-after-inactive-enabled: false;
    in-out property <int> hide-after-inactive-ms: 1000;

    // Animation settings
    in-out property <bool> animations-enabled: true;
    in-out property <float> animations-slowdown: 1.0;

    // Animation configurations as a model (11 animations)
    // Replaces 66 individual properties with a single model
    in property <[AnimationConfig]> animations-model;

    // Overview settings
    in-out property <float> overview-zoom: 0.5;
    in-out property <bool> overview-backdrop-enabled: false;
    in-out property <color> overview-backdrop-color: #000000;
    in-out property <string> overview-backdrop-hex: "#000000";

    // Phase 8: Workspace shadow
    in-out property <bool> overview-workspace-shadow-enabled: false;
    in-out property <float> overview-workspace-shadow-softness: 30;
    in-out property <float> overview-workspace-shadow-spread: 10;
    in-out property <float> overview-workspace-shadow-offset-x: 0;
    in-out property <float> overview-workspace-shadow-offset-y: 5;
    in-out property <color> overview-workspace-shadow-color: #00000080;
    in-out property <string> overview-workspace-shadow-color-hex: "#00000080";

    // Keyboard settings
    in-out property <bool> keyboard-off: false;
    in-out property <string> xkb-layout: "us";
    in-out property <string> xkb-variant: "";
    in-out property <string> xkb-model: "";
    in-out property <string> xkb-rules: "";
    in-out property <string> xkb-options: "";
    in-out property <string> xkb-file: "";  // Path to custom .xkb keymap file
    in-out property <int> repeat-delay: 600;
    in-out property <int> repeat-rate: 25;
    in-out property <bool> numlock: false;
    in-out property <int> track-layout-index: 0;

    // Mouse settings
    in-out property <bool> mouse-off: false;
    in-out property <bool> mouse-natural-scroll: false;
    in-out property <bool> mouse-left-handed: false;
    in-out property <float> mouse-accel-speed: 0.0;
    in-out property <int> mouse-accel-profile-index: 0;
    in-out property <float> mouse-scroll-factor: 1.0;
    in-out property <int> mouse-scroll-method-index: 3;
    in-out property <bool> mouse-middle-emulation: false;
    in-out property <int> mouse-scroll-button: 0;  // Button code for on-button-down scrolling
    in-out property <bool> mouse-scroll-button-lock: false;  // Toggle scroll mode

    // Touchpad settings
    in-out property <bool> touchpad-off: false;
    in-out property <bool> touchpad-tap: true;
    in-out property <int> touchpad-tap-button-map-index: 0;
    in-out property <bool> touchpad-natural-scroll: true;
    in-out property <int> touchpad-scroll-method-index: 0;
    in-out property <float> touchpad-scroll-factor: 1.0;
    in-out property <int> touchpad-click-method-index: 0;
    in-out property <bool> touchpad-middle-emulation: false;
    in-out property <bool> touchpad-left-handed: false;
    in-out property <bool> touchpad-dwt: true;
    in-out property <bool> touchpad-dwtp: false;
    in-out property <bool> touchpad-drag: true;
    in-out property <bool> touchpad-drag-lock: false;
    in-out property <float> touchpad-accel-speed: 0.0;
    in-out property <int> touchpad-accel-profile-index: 0;
    in-out property <bool> touchpad-disabled-on-external-mouse: false;
    in-out property <int> touchpad-scroll-button: 0;  // Button code for on-button-down scrolling
    in-out property <bool> touchpad-scroll-button-lock: false;  // Toggle scroll mode

    // Trackpoint settings
    in-out property <bool> trackpoint-off: false;
    in-out property <float> trackpoint-accel-speed: 0.0;
    in-out property <int> trackpoint-accel-profile-index: 0;
    in-out property <bool> trackpoint-natural-scroll: false;
    in-out property <bool> trackpoint-left-handed: false;
    in-out property <int> trackpoint-scroll-method-index: 3;
    in-out property <int> trackpoint-scroll-button: 0;
    in-out property <bool> trackpoint-scroll-button-lock: false;
    in-out property <bool> trackpoint-middle-emulation: false;

    // Trackball settings
    in-out property <bool> trackball-off: false;
    in-out property <float> trackball-accel-speed: 0.0;
    in-out property <int> trackball-accel-profile-index: 0;
    in-out property <bool> trackball-natural-scroll: false;
    in-out property <bool> trackball-left-handed: false;
    in-out property <int> trackball-scroll-method-index: 3;
    in-out property <int> trackball-scroll-button: 0;
    in-out property <bool> trackball-scroll-button-lock: false;
    in-out property <bool> trackball-middle-emulation: false;

    // Tablet settings
    in-out property <bool> tablet-off: false;
    in-out property <string> tablet-map-to-output: "";
    in-out property <bool> tablet-left-handed: false;
    in-out property <bool> tablet-has-calibration: false;
    in-out property <float> tablet-cal-m0: 1.0;
    in-out property <float> tablet-cal-m1: 0.0;
    in-out property <float> tablet-cal-m2: 0.0;
    in-out property <float> tablet-cal-m3: 0.0;
    in-out property <float> tablet-cal-m4: 1.0;
    in-out property <float> tablet-cal-m5: 0.0;

    // Touch settings
    in-out property <bool> touch-off: false;
    in-out property <string> touch-map-to-output: "";
    in-out property <bool> touch-has-calibration: false;
    in-out property <float> touch-cal-m0: 1.0;
    in-out property <float> touch-cal-m1: 0.0;
    in-out property <float> touch-cal-m2: 0.0;
    in-out property <float> touch-cal-m3: 0.0;
    in-out property <float> touch-cal-m4: 1.0;
    in-out property <float> touch-cal-m5: 0.0;

    // Display/Output settings
    in-out property <[string]> output-list: [];
    in-out property <[string]> discovered-outputs: [];
    in-out property <string> output-names: "";
    in-out property <int> selected-output-index: -1;
    in-out property <string> current-output-name: "";
    in-out property <bool> current-output-enabled: true;
    in-out property <float> current-output-scale: 1.0;
    in-out property <string> current-output-mode: "";
    in-out property <int> current-output-pos-x: 0;
    in-out property <int> current-output-pos-y: 0;
    in-out property <int> current-output-transform-index: 0;
    in-out property <int> current-output-vrr-index: 0;
    in-out property <string> new-output-name: "";

    // Available display modes for current output
    in-out property <[string]> available-modes: [];
    in-out property <int> selected-mode-index: -1;
    in-out property <bool> use-custom-mode: false;

    // Phase 8: Per-output custom mode/modeline
    in-out property <bool> current-output-mode-custom: false;
    in-out property <string> current-output-modeline: "";

    // Phase 8: Per-output hot corners
    in-out property <bool> current-output-hot-corners-enabled: false;
    in-out property <bool> current-output-hc-override-enabled: false;
    in-out property <bool> current-output-hc-top-left: false;
    in-out property <bool> current-output-hc-top-right: false;
    in-out property <bool> current-output-hc-bottom-left: false;
    in-out property <bool> current-output-hc-bottom-right: false;

    // Phase 8: Per-output layout override
    in-out property <bool> current-output-layout-override-enabled: false;
    in-out property <float> current-output-layout-gaps-inner: 8;
    in-out property <float> current-output-layout-gaps-outer: 8;
    in-out property <float> current-output-layout-struts-left: 0;
    in-out property <float> current-output-layout-struts-right: 0;
    in-out property <float> current-output-layout-struts-top: 0;
    in-out property <float> current-output-layout-struts-bottom: 0;
    in-out property <int> current-output-layout-center-index: 0;

    // Layout Extras - Shadow settings
    in-out property <bool> shadow-enabled: true;
    in-out property <int> shadow-softness: 30;
    in-out property <int> shadow-spread: 5;
    in-out property <int> shadow-offset-x: 0;
    in-out property <int> shadow-offset-y: 5;
    in-out property <bool> shadow-draw-behind: false;
    in-out property <color> shadow-color: #00000070;
    in-out property <color> shadow-inactive-color: #00000050;
    in-out property <string> shadow-color-hex: "#00000070";
    in-out property <string> shadow-inactive-color-hex: "#00000050";

    // Layout Extras - Tab indicator settings
    in-out property <bool> tab-indicator-enabled: true;
    in-out property <bool> tab-indicator-hide-single: false;
    in-out property <bool> tab-indicator-within-column: false;
    in-out property <int> tab-indicator-gap: 5;
    in-out property <int> tab-indicator-width: 4;
    in-out property <int> tab-indicator-position-index: 0;
    in-out property <int> tab-indicator-corner-radius: 8;
    in-out property <int> tab-indicator-gaps-between: 2;
    in-out property <color> tab-indicator-active-color: #7fc8ff;
    in-out property <color> tab-indicator-inactive-color: #505050;
    in-out property <color> tab-indicator-urgent-color: #eb6f92;
    in-out property <string> tab-indicator-active-hex: "#7fc8ff";
    in-out property <string> tab-indicator-inactive-hex: "#505050";
    in-out property <string> tab-indicator-urgent-hex: "#eb6f92";

    // Layout Extras - Insert hint settings
    in-out property <bool> insert-hint-enabled: true;
    in-out property <color> insert-hint-color: #ffc87f80;
    in-out property <string> insert-hint-color-hex: "#ffc87f80";

    // Gestures - Hot corners
    in-out property <bool> hot-corners-enabled: false;
    in-out property <bool> hot-corner-top-left: true;
    in-out property <bool> hot-corner-top-right: false;
    in-out property <bool> hot-corner-bottom-left: false;
    in-out property <bool> hot-corner-bottom-right: false;

    // Gestures - DND edge view scroll
    in-out property <bool> dnd-edge-scroll-enabled: true;
    in-out property <int> dnd-edge-scroll-trigger-width: 30;
    in-out property <int> dnd-edge-scroll-delay: 100;
    in-out property <int> dnd-edge-scroll-max-speed: 1500;

    // Gestures - DND workspace switch
    in-out property <bool> dnd-workspace-switch-enabled: true;
    in-out property <int> dnd-workspace-switch-trigger-height: 50;
    in-out property <int> dnd-workspace-switch-delay: 100;
    in-out property <int> dnd-workspace-switch-max-speed: 1500;

    // Miscellaneous settings
    in-out property <bool> prefer-no-csd: false;
    in-out property <string> screenshot-path: "~/Pictures/Screenshots/Screenshot from %Y-%m-%d %H-%M-%S.png";
    in-out property <bool> disable-primary-clipboard: false;
    in-out property <bool> hotkey-overlay-skip: false;

    // Phase 8: New misc settings
    in-out property <bool> hotkey-overlay-hide-not-bound: false;
    in-out property <bool> config-notification-disable-failed: false;

    // New misc settings (v25.08+)
    in-out property <bool> spawn-sh-at-startup: false;
    in-out property <int> xwayland-satellite-index: 0;
    in-out property <string> xwayland-satellite-path: "";

    // Developer options
    in-out property <bool> show-debug-options: false;

    // Window Rules settings
    in-out property <[string]> window-rules-list: [];
    in-out property <int> selected-window-rule-index: -1;
    in-out property <string> current-rule-name: "";
    // Multi-match support
    in-out property <[string]> current-matches-list: [];
    in-out property <int> selected-match-index: 0;
    in-out property <int> current-matches-count: 0;
    in-out property <string> current-match-app-id: "";
    in-out property <string> current-match-title: "";
    // Advanced match criteria (0=Any, 1=Yes, 2=No)
    in-out property <int> current-match-is-floating: 0;
    in-out property <int> current-match-is-active: 0;
    in-out property <int> current-match-is-focused: 0;
    in-out property <int> current-match-is-active-in-column: 0;
    in-out property <int> current-match-is-window-cast-target: 0;
    in-out property <int> current-match-is-urgent: 0;
    in-out property <int> current-match-at-startup: 0;
    // Window picker (for selecting from running windows)
    in-out property <[string]> running-windows-list: [];
    in-out property <bool> show-window-picker: false;
    in-out property <int> current-open-behavior-index: 0;
    in-out property <bool> current-has-opacity: false;
    in-out property <float> current-opacity: 1.0;
    in-out property <bool> current-block-screencast: false;
    in-out property <bool> current-has-corner-radius: false;
    in-out property <int> current-corner-radius: 12;
    in-out property <bool> current-clip-to-geometry: false;
    in-out property <string> current-open-on-output: "";
    in-out property <string> current-open-on-workspace: "";
    // New dynamic properties
    in-out property <int> current-vrr-index: 0;
    in-out property <int> current-column-display-index: 0;
    in-out property <int> current-tiled-state-index: 0;
    in-out property <bool> current-baba-is-float: false;
    // Floating position (for floating windows)
    in-out property <bool> current-has-floating-position: false;
    in-out property <int> current-floating-x: 0;
    in-out property <int> current-floating-y: 0;
    in-out property <int> current-floating-relative-to: 0;
    // Per-window shadow override
    in-out property <int> current-shadow-mode: 0;
    in-out property <int> current-shadow-softness: 30;
    in-out property <int> current-shadow-spread: 5;
    in-out property <int> current-shadow-offset-x: 0;
    in-out property <int> current-shadow-offset-y: 5;
    in-out property <string> current-shadow-color: "#00000070";
    in-out property <string> current-shadow-inactive-color: "#00000040";
    in-out property <bool> current-shadow-draw-behind-window: false;
    // Per-window tab-indicator override
    in-out property <int> current-tab-indicator-mode: 0;
    in-out property <bool> current-tab-indicator-hide-when-single: false;
    in-out property <bool> current-tab-indicator-place-within-column: false;
    in-out property <int> current-tab-indicator-gap: 5;
    in-out property <int> current-tab-indicator-width: 4;
    in-out property <float> current-tab-indicator-length: 1.0;
    in-out property <int> current-tab-indicator-position: 0;
    in-out property <int> current-tab-indicator-gaps-between-tabs: 2;
    in-out property <int> current-tab-indicator-corner-radius: 8;
    in-out property <string> current-tab-indicator-active-color: "#cba6f7";
    in-out property <string> current-tab-indicator-inactive-color: "#45475a";

    // Named Workspaces settings
    in-out property <[string]> workspaces-list: [];
    in-out property <int> selected-workspace-index: -1;
    in-out property <string> current-workspace-name: "";
    in-out property <string> current-workspace-open-on-output: "";
    in-out property <bool> current-workspace-has-layout-override: false;
    in-out property <bool> current-workspace-has-gaps-override: false;
    in-out property <float> current-workspace-gaps-inner: 16;
    in-out property <float> current-workspace-gaps-outer: 8;
    in-out property <bool> current-workspace-has-struts-override: false;
    in-out property <float> current-workspace-strut-left: 0;
    in-out property <float> current-workspace-strut-right: 0;
    in-out property <float> current-workspace-strut-top: 0;
    in-out property <float> current-workspace-strut-bottom: 0;
    in-out property <bool> current-workspace-has-center-override: false;
    in-out property <int> current-workspace-center-focused-column-index: 0;
    in-out property <bool> current-workspace-always-center-single-column: false;

    // Layer Rules settings
    in-out property <[string]> layer-rules-list: [];
    in-out property <int> selected-layer-rule-index: -1;
    in-out property <string> current-layer-rule-name: "";
    in-out property <[string]> current-layer-rule-matches-list: [];
    in-out property <int> selected-layer-rule-match-index: 0;
    in-out property <int> current-layer-rule-matches-count: 0;
    in-out property <string> current-layer-rule-match-namespace: "";
    in-out property <bool> current-layer-rule-match-at-startup: false;
    in-out property <bool> current-layer-rule-match-has-at-startup: false;
    in-out property <bool> current-layer-rule-has-block-out-from: false;
    in-out property <int> current-layer-rule-block-out-from-index: 0;
    in-out property <bool> current-layer-rule-has-opacity: false;
    in-out property <float> current-layer-rule-opacity: 1.0;
    in-out property <bool> current-layer-rule-has-corner-radius: false;
    in-out property <int> current-layer-rule-corner-radius: 12;
    in-out property <bool> current-layer-rule-place-within-backdrop: false;
    in-out property <bool> current-layer-rule-baba-is-float: false;
    in-out property <bool> current-layer-rule-has-shadow: false;
    in-out property <bool> current-layer-rule-shadow-enabled: true;
    in-out property <int> current-layer-rule-shadow-softness: 30;
    in-out property <int> current-layer-rule-shadow-spread: 5;
    in-out property <int> current-layer-rule-shadow-offset-x: 0;
    in-out property <int> current-layer-rule-shadow-offset-y: 5;
    in-out property <bool> current-layer-rule-shadow-draw-behind: false;
    in-out property <color> current-layer-rule-shadow-color: #00000070;
    in-out property <color> current-layer-rule-shadow-inactive-color: #00000050;
    in-out property <string> current-layer-rule-shadow-color-hex: "#00000070";
    in-out property <string> current-layer-rule-shadow-inactive-color-hex: "#00000050";

    // Keybindings (full editing support)
    in-out property <[KeybindingItem]> keybindings-list: [];
    in-out property <int> selected-keybinding-index: -1;
    in-out property <bool> keybindings-loaded: false;
    in-out property <string> keybindings-source-file: "";
    in-out property <string> keybindings-error: "";
    // Keybinding editor state
    in-out property <bool> keybinding-editor-visible: false;
    in-out property <string> edit-key-combo: "";
    in-out property <[KeyPart]> edit-key-parts: [];  // Parsed parts for badge display
    in-out property <bool> keybinding-capturing: false;  // Key capture mode active
    in-out property <string> edit-overlay-title: "";
    in-out property <bool> edit-allow-when-locked: false;
    in-out property <bool> edit-repeat: false;
    in-out property <int> edit-cooldown: 0;
    in-out property <int> edit-action-type: 0;  // 0=spawn, 1=niri, 2=niri-args
    in-out property <string> edit-action-command: "";
    in-out property <string> edit-action-name: "";

    // Startup commands (spawn-at-startup)
    in-out property <[string]> startup-command-list: [];
    in-out property <int> selected-startup-index: -1;
    in-out property <string> current-startup-command: "";

    // Environment variables
    in-out property <[string]> environment-variable-list: [];
    in-out property <int> selected-environment-index: -1;
    in-out property <string> current-env-name: "";
    in-out property <string> current-env-value: "";

    // Debug settings
    in-out property <bool> debug-expert-mode: false;  // Gates dangerous settings
    in-out property <bool> debug-preview-render: false;
    in-out property <bool> debug-enable-overlay-planes: false;
    in-out property <bool> debug-disable-cursor-plane: false;
    in-out property <bool> debug-disable-direct-scanout: false;
    in-out property <bool> debug-restrict-primary-scanout-to-matching-format: false;
    in-out property <string> debug-render-drm-device: "";
    in-out property <string> debug-ignore-drm-devices: "";
    in-out property <bool> debug-wait-for-frame-completion: false;
    in-out property <bool> debug-disable-resize-throttling: false;
    in-out property <bool> debug-disable-transactions: false;
    in-out property <bool> debug-emulate-zero-presentation-time: false;
    in-out property <bool> debug-skip-cursor-only-updates-during-vrr: false;
    in-out property <bool> debug-dbus-interfaces-in-non-session: false;
    in-out property <bool> debug-keep-laptop-panel-on-lid-closed: false;
    in-out property <bool> debug-disable-monitor-names: false;
    in-out property <bool> debug-force-disable-connectors-on-resume: false;
    in-out property <bool> debug-strict-new-window-focus: false;
    in-out property <bool> debug-honor-xdg-activation-with-invalid-serial: false;
    in-out property <bool> debug-deactivate-unfocused-windows: false;
    in-out property <bool> debug-force-pipewire-invalid-modifier: false;

    // Switch events
    in-out property <[string]> switch-lid-close-commands: [];
    in-out property <int> switch-lid-close-selected: -1;
    in-out property <string> switch-lid-close-current: "";
    in-out property <[string]> switch-lid-open-commands: [];
    in-out property <int> switch-lid-open-selected: -1;
    in-out property <string> switch-lid-open-current: "";
    in-out property <[string]> switch-tablet-mode-on-commands: [];
    in-out property <int> switch-tablet-mode-on-selected: -1;
    in-out property <string> switch-tablet-mode-on-current: "";
    in-out property <[string]> switch-tablet-mode-off-commands: [];
    in-out property <int> switch-tablet-mode-off-selected: -1;
    in-out property <string> switch-tablet-mode-off-current: "";

    // Recent windows settings (v25.05+)
    in-out property <bool> recent-windows-enabled: true;
    in-out property <int> recent-windows-debounce-ms: 100;
    in-out property <int> recent-windows-open-delay-ms: 200;
    in-out property <color> recent-windows-highlight-active-color: #7fc8ff;
    in-out property <string> recent-windows-highlight-active-color-hex: "#7fc8ff";
    in-out property <color> recent-windows-highlight-urgent-color: #eb6f92;
    in-out property <string> recent-windows-highlight-urgent-color-hex: "#eb6f92";
    in-out property <int> recent-windows-highlight-padding: 8;
    in-out property <int> recent-windows-highlight-corner-radius: 12;
    in-out property <int> recent-windows-previews-max-height: 200;
    in-out property <float> recent-windows-previews-max-scale: 0.5;

    // Wizard state
    in-out property <bool> wizard-visible: false;
    in-out property <int> wizard-step: 0;
    in-out property <bool> has-include-line: false;
    in-out property <string> config-path: "~/.config/niri/config.kdl";
    in-out property <string> include-line: "include \"niri-settings/main.kdl\"";

    // Import summary (for first run)
    in-out property <string> import-summary: "";
    in-out property <bool> has-imports: false;
    in-out property <int> import-count: 0;
    in-out property <int> import-defaulted-count: 0;
    in-out property <int> import-includes-count: 0;
    in-out property <[string]> import-warnings: [];
    in-out property <bool> show-import-details: false;

    // Consolidation suggestions
    in-out property <bool> show-consolidation-dialog: false;
    in-out property <[ConsolidationItem]> consolidation-suggestions: [];
    in-out property <int> consolidation-affected-rules: 0;
    callback consolidation-dismissed();
    callback consolidation-apply-selected();
    callback consolidation-suggestion-toggled(int, bool);

    // Config diff view
    in-out property <bool> diff-view-visible: false;
    in property <[CategoryDiffItem]> diff-categories: [];
    in property <int> diff-total-additions: 0;
    in property <int> diff-total-deletions: 0;

    // Dialog state
    in-out property <bool> error-dialog-visible: false;
    in-out property <string> error-title: "Error";
    in-out property <string> error-message: "";
    in-out property <string> error-details: "";

    // Status notification (toast)
    in-out property <bool> status-visible: false;
    in-out property <string> status-message: "";
    in-out property <bool> status-is-error: false;

    // Callback for Rust to show toast notifications (Rust handles auto-dismiss timer)
    public function show-status-toast(msg: string, is-error: bool) {
        status-message = msg;
        status-is-error = is-error;
        status-visible = true;
    }

    // Hardware detection - controls visibility of input device tabs
    in-out property <bool> has-touchpad: true;
    in-out property <bool> has-trackpoint: true;
    in-out property <bool> has-trackball: true;
    in-out property <bool> has-tablet: true;
    in-out property <bool> has-touch: true;

    // Niri info
    in-out property <string> niri-version: "";
    in-out property <bool> niri-running: false;

    // Config validation
    in-out property <string> validation-result: "";
    in-out property <bool> validation-success: false;
    callback validate-config-requested();

    // Tools page
    in-out property <string> tools-output: "";
    in-out property <string> tools-last-action: "";
    callback tools-list-windows();
    callback tools-list-workspaces();
    callback tools-list-outputs();
    callback tools-focused-window();
    callback tools-focused-output();
    callback tools-reload-config();

    // Config editor properties
    in-out property <string> config-editor-content: "";
    in-out property <int> config-editor-file-index: 0;
    callback config-editor-load-file(int);
    callback config-editor-refresh();

    // Backup browser properties
    in-out property <[BackupEntry]> backup-list: [];
    in-out property <int> backup-selected-index: -1;
    in-out property <string> backup-preview: "";
    in-out property <string> backup-status: "";
    in-out property <bool> backup-has-backups: false;
    callback backup-refresh();
    callback backup-preview-requested(int);
    callback backup-restore-requested(int);

    callback close-requested();
    callback category-changed(int);
    callback search-changed(string);
    callback search-result-selected(int);  // Navigate to category from search result

    // Diff view callbacks
    callback review-changes-requested();
    callback diff-save-now();
    callback diff-discard-all();
    callback diff-close();

    // Wizard callbacks
    callback wizard-completed();
    callback wizard-cancelled();
    callback add-include-line-requested();

    // Dialog callbacks
    callback error-dismissed();

    // Appearance callbacks
    callback focus-ring-toggled(bool);
    callback focus-ring-width-changed(float);
    callback focus-ring-active-color-changed(color);
    callback focus-ring-inactive-color-changed(color);
    callback focus-ring-urgent-color-changed(color);
    callback border-toggled(bool);
    callback border-thickness-changed(float);
    callback border-active-color-changed(color);
    callback border-inactive-color-changed(color);
    callback border-urgent-color-changed(color);
    callback gaps-inner-changed(float);
    callback background-color-changed(color);
    callback gaps-outer-changed(float);
    callback corner-radius-changed(float);

    // Behavior callbacks
    callback focus-follows-mouse-toggled(bool);
    callback warp-mouse-to-focus-toggled(bool);
    callback center-focused-column-toggled(bool);
    callback always-center-single-column-toggled(bool);
    callback default-column-width-type-changed(int);
    callback default-column-width-proportion-changed(float);
    callback default-column-width-fixed-changed(float);
    callback strut-left-changed(float);
    callback strut-right-changed(float);
    callback strut-top-changed(float);
    callback strut-bottom-changed(float);
    callback mod-key-changed(int);
    callback mod-key-nested-enabled-toggled(bool);
    callback mod-key-nested-changed(int);
    callback disable-power-key-handling-toggled(bool);

    // Cursor callbacks
    callback cursor-theme-changed(string);
    callback cursor-size-changed(int);
    callback hide-when-typing-toggled(bool);
    callback hide-after-inactive-toggled(bool);
    callback hide-after-inactive-ms-changed(int);

    // Animation callbacks
    callback animations-toggled(bool);
    callback animations-slowdown-changed(float);

    // Indexed animation callbacks (6 total instead of 66)
    // Each takes (animation_id, value) where animation_id is 0-10
    callback animation-type-changed(int /* id */, int /* type */);
    callback animation-damping-changed(int /* id */, float);
    callback animation-stiffness-changed(int /* id */, int);
    callback animation-epsilon-changed(int /* id */, float);
    callback animation-duration-changed(int /* id */, int);
    callback animation-curve-changed(int /* id */, int);
    // Cubic-bezier control point callbacks
    callback animation-bezier-x1-changed(int /* id */, float);
    callback animation-bezier-y1-changed(int /* id */, float);
    callback animation-bezier-x2-changed(int /* id */, float);
    callback animation-bezier-y2-changed(int /* id */, float);

    // Overview callbacks
    callback overview-zoom-changed(float);
    callback overview-backdrop-toggled(bool);
    callback overview-backdrop-color-changed(color);

    // Phase 8: Workspace shadow callbacks
    callback overview-workspace-shadow-toggled(bool);
    callback overview-workspace-shadow-softness-changed(float);
    callback overview-workspace-shadow-spread-changed(float);
    callback overview-workspace-shadow-offset-x-changed(float);
    callback overview-workspace-shadow-offset-y-changed(float);
    callback overview-workspace-shadow-color-changed(color);

    // Keyboard callbacks
    callback keyboard-off-toggled(bool);
    callback xkb-layout-changed(string);
    callback xkb-variant-changed(string);
    callback xkb-model-changed(string);
    callback xkb-rules-changed(string);
    callback xkb-options-changed(string);
    callback xkb-file-changed(string);
    callback repeat-delay-changed(int);
    callback repeat-rate-changed(int);
    callback numlock-toggled(bool);
    callback track-layout-changed(int);

    // Mouse callbacks
    callback mouse-off-toggled(bool);
    callback mouse-natural-scroll-toggled(bool);
    callback mouse-left-handed-toggled(bool);
    callback mouse-accel-speed-changed(float);
    callback mouse-accel-profile-changed(int);
    callback mouse-scroll-factor-changed(float);
    callback mouse-scroll-method-changed(int);
    callback mouse-middle-emulation-toggled(bool);
    callback mouse-scroll-button-changed(int);
    callback mouse-scroll-button-lock-toggled(bool);

    // Touchpad callbacks
    callback touchpad-off-toggled(bool);
    callback touchpad-tap-toggled(bool);
    callback touchpad-tap-button-map-changed(int);
    callback touchpad-natural-scroll-toggled(bool);
    callback touchpad-scroll-method-changed(int);
    callback touchpad-scroll-factor-changed(float);
    callback touchpad-click-method-changed(int);
    callback touchpad-middle-emulation-toggled(bool);
    callback touchpad-left-handed-toggled(bool);
    callback touchpad-dwt-toggled(bool);
    callback touchpad-dwtp-toggled(bool);
    callback touchpad-drag-toggled(bool);
    callback touchpad-drag-lock-toggled(bool);
    callback touchpad-accel-speed-changed(float);
    callback touchpad-accel-profile-changed(int);
    callback touchpad-disabled-on-external-mouse-toggled(bool);
    callback touchpad-scroll-button-changed(int);
    callback touchpad-scroll-button-lock-toggled(bool);

    // Trackpoint callbacks
    callback trackpoint-off-toggled(bool);
    callback trackpoint-accel-speed-changed(float);
    callback trackpoint-accel-profile-changed(int);
    callback trackpoint-natural-scroll-toggled(bool);
    callback trackpoint-left-handed-toggled(bool);
    callback trackpoint-scroll-method-changed(int);
    callback trackpoint-scroll-button-changed(int);
    callback trackpoint-scroll-button-lock-toggled(bool);
    callback trackpoint-middle-emulation-toggled(bool);

    // Trackball callbacks
    callback trackball-off-toggled(bool);
    callback trackball-accel-speed-changed(float);
    callback trackball-accel-profile-changed(int);
    callback trackball-natural-scroll-toggled(bool);
    callback trackball-left-handed-toggled(bool);
    callback trackball-scroll-method-changed(int);
    callback trackball-scroll-button-changed(int);
    callback trackball-scroll-button-lock-toggled(bool);
    callback trackball-middle-emulation-toggled(bool);

    // Tablet callbacks
    callback tablet-off-toggled(bool);
    callback tablet-map-to-output-changed(string);
    callback tablet-left-handed-toggled(bool);
    callback tablet-calibration-toggled(bool);
    callback tablet-calibration-changed(float, float, float, float, float, float);

    // Touch callbacks
    callback touch-off-toggled(bool);
    callback touch-map-to-output-changed(string);
    callback touch-calibration-toggled(bool);
    callback touch-calibration-changed(float, float, float, float, float, float);

    // Display/Output callbacks
    callback output-add(string);
    callback output-remove(int);
    callback output-select(int);
    callback output-discover();
    callback output-enabled-toggled(bool);
    callback output-scale-changed(float);
    callback output-mode-changed(string);
    callback output-pos-x-changed(int);
    callback output-pos-y-changed(int);
    callback output-transform-changed(int);
    callback output-vrr-changed(int);

    // Mode dropdown callbacks
    callback output-mode-selected(int);  // Mode selected from dropdown
    callback use-custom-mode-toggled(bool);  // Toggle for custom mode input

    // Phase 8: Per-output custom mode/modeline callbacks
    callback output-mode-custom-toggled(bool);
    callback output-modeline-changed(string);

    // Phase 8: Per-output hot corners callbacks
    callback output-hc-override-toggled(bool);
    callback output-hc-enabled-toggled(bool);
    callback output-hc-top-left-toggled(bool);
    callback output-hc-top-right-toggled(bool);
    callback output-hc-bottom-left-toggled(bool);
    callback output-hc-bottom-right-toggled(bool);

    // Phase 8: Per-output layout override callbacks
    callback output-layout-override-toggled(bool);
    callback output-layout-gaps-inner-changed(float);
    callback output-layout-gaps-outer-changed(float);
    callback output-layout-struts-left-changed(float);
    callback output-layout-struts-right-changed(float);
    callback output-layout-struts-top-changed(float);
    callback output-layout-struts-bottom-changed(float);
    callback output-layout-center-changed(int);

    // Layout Extras - Shadow callbacks
    callback shadow-toggled(bool);
    callback shadow-softness-changed(int);
    callback shadow-spread-changed(int);
    callback shadow-offset-x-changed(int);
    callback shadow-offset-y-changed(int);
    callback shadow-draw-behind-toggled(bool);
    callback shadow-color-changed(color);
    callback shadow-inactive-color-changed(color);

    // Layout Extras - Tab indicator callbacks
    callback tab-indicator-toggled(bool);
    callback tab-indicator-hide-single-toggled(bool);
    callback tab-indicator-within-column-toggled(bool);
    callback tab-indicator-gap-changed(int);
    callback tab-indicator-width-changed(int);
    callback tab-indicator-position-changed(int);
    callback tab-indicator-corner-radius-changed(int);
    callback tab-indicator-gaps-between-changed(int);
    callback tab-indicator-active-color-changed(color);
    callback tab-indicator-inactive-color-changed(color);
    callback tab-indicator-urgent-color-changed(color);

    // Layout Extras - Insert hint callbacks
    callback insert-hint-toggled(bool);
    callback insert-hint-color-changed(color);

    // Gestures - Hot corners callbacks
    callback hot-corners-toggled(bool);
    callback hot-corner-top-left-toggled(bool);
    callback hot-corner-top-right-toggled(bool);
    callback hot-corner-bottom-left-toggled(bool);
    callback hot-corner-bottom-right-toggled(bool);

    // Gestures - DND edge scroll callbacks
    callback dnd-edge-scroll-toggled(bool);
    callback dnd-edge-scroll-trigger-width-changed(int);
    callback dnd-edge-scroll-delay-changed(int);
    callback dnd-edge-scroll-max-speed-changed(int);

    // Gestures - DND workspace switch callbacks
    callback dnd-workspace-switch-toggled(bool);
    callback dnd-workspace-switch-trigger-height-changed(int);
    callback dnd-workspace-switch-delay-changed(int);
    callback dnd-workspace-switch-max-speed-changed(int);

    // Miscellaneous callbacks
    callback prefer-no-csd-toggled(bool);
    callback screenshot-path-changed(string);
    callback disable-primary-clipboard-toggled(bool);
    callback hotkey-overlay-skip-toggled(bool);

    // Phase 8: New misc callbacks
    callback hotkey-overlay-hide-not-bound-toggled(bool);
    callback config-notification-disable-failed-toggled(bool);

    // New misc callbacks (v25.08+)
    callback spawn-sh-at-startup-toggled(bool);
    callback xwayland-satellite-mode-changed(int);
    callback xwayland-satellite-path-changed(string);

    // Developer callbacks
    callback show-debug-options-toggled(bool);

    // Window Rules callbacks
    callback window-rule-add();
    callback window-rule-remove(int);
    callback window-rule-select(int);
    callback window-rule-name-changed(string);
    callback window-rule-reorder(int, int);  // from-index, to-index
    // Multi-match callbacks
    callback window-rule-add-match();
    callback window-rule-remove-match(int);
    callback window-rule-select-match(int);
    callback window-rule-match-app-id-changed(string);
    callback window-rule-match-title-changed(string);
    callback window-rule-match-is-floating-changed(int);
    callback window-rule-match-is-active-changed(int);
    callback window-rule-match-is-focused-changed(int);
    callback window-rule-match-is-active-in-column-changed(int);
    callback window-rule-match-is-window-cast-target-changed(int);
    callback window-rule-match-is-urgent-changed(int);
    callback window-rule-match-at-startup-changed(int);
    callback window-rule-open-behavior-changed(int);
    callback window-rule-opacity-toggled(bool);
    callback window-rule-opacity-changed(float);
    callback window-rule-block-screencast-toggled(bool);
    callback window-rule-corner-radius-toggled(bool);
    callback window-rule-corner-radius-changed(int);
    callback window-rule-clip-to-geometry-toggled(bool);
    callback window-rule-open-on-output-changed(string);
    callback window-rule-open-on-workspace-changed(string);
    // New dynamic property callbacks
    callback window-rule-vrr-changed(int);
    callback window-rule-column-display-changed(int);
    callback window-rule-tiled-state-changed(int);
    callback window-rule-baba-is-float-toggled(bool);
    // Floating position callbacks
    callback window-rule-floating-position-toggled(bool);
    callback window-rule-floating-position-x-changed(int);
    callback window-rule-floating-position-y-changed(int);
    callback window-rule-floating-position-relative-to-changed(int);
    // Window picker callbacks
    callback window-rule-refresh-windows();
    callback window-rule-select-running-window(int);
    // Shadow override callbacks
    callback window-rule-shadow-mode-changed(int);
    callback window-rule-shadow-softness-changed(int);
    callback window-rule-shadow-spread-changed(int);
    callback window-rule-shadow-offset-x-changed(int);
    callback window-rule-shadow-offset-y-changed(int);
    callback window-rule-shadow-color-changed(string);
    callback window-rule-shadow-inactive-color-changed(string);
    callback window-rule-shadow-draw-behind-window-toggled(bool);
    // Tab indicator override callbacks
    callback window-rule-tab-indicator-mode-changed(int);
    callback window-rule-tab-indicator-hide-when-single-toggled(bool);
    callback window-rule-tab-indicator-place-within-column-toggled(bool);
    callback window-rule-tab-indicator-gap-changed(int);
    callback window-rule-tab-indicator-width-changed(int);
    callback window-rule-tab-indicator-length-changed(float);
    callback window-rule-tab-indicator-position-changed(int);
    callback window-rule-tab-indicator-gaps-between-tabs-changed(int);
    callback window-rule-tab-indicator-corner-radius-changed(int);
    callback window-rule-tab-indicator-active-color-changed(string);
    callback window-rule-tab-indicator-inactive-color-changed(string);

    // Named Workspaces callbacks
    callback workspace-add();
    callback workspace-remove(int);
    callback workspace-select(int);
    callback workspace-name-changed(string);
    callback workspace-open-on-output-changed(string);
    callback workspace-layout-override-toggled(bool);
    callback workspace-gaps-override-toggled(bool);
    callback workspace-gaps-inner-changed(float);
    callback workspace-gaps-outer-changed(float);
    callback workspace-struts-override-toggled(bool);
    callback workspace-strut-left-changed(float);
    callback workspace-strut-right-changed(float);
    callback workspace-strut-top-changed(float);
    callback workspace-strut-bottom-changed(float);
    callback workspace-center-override-toggled(bool);
    callback workspace-center-focused-column-changed(int);
    callback workspace-always-center-single-column-toggled(bool);

    // Layer Rules callbacks
    callback layer-rule-add();
    callback layer-rule-remove(int);
    callback layer-rule-select(int);
    callback layer-rule-name-changed(string);
    callback layer-rule-reorder(int, int);  // from-index, to-index
    callback layer-rule-add-match();
    callback layer-rule-remove-match(int);
    callback layer-rule-select-match(int);
    callback layer-rule-match-namespace-changed(string);
    callback layer-rule-match-at-startup-has-toggled(bool);
    callback layer-rule-match-at-startup-toggled(bool);
    callback layer-rule-block-out-from-toggled(bool);
    callback layer-rule-block-out-from-changed(int);
    callback layer-rule-opacity-toggled(bool);
    callback layer-rule-opacity-changed(float);
    callback layer-rule-corner-radius-toggled(bool);
    callback layer-rule-corner-radius-changed(int);
    callback layer-rule-place-within-backdrop-toggled(bool);
    callback layer-rule-baba-is-float-toggled(bool);
    callback layer-rule-shadow-toggled(bool);
    callback layer-rule-shadow-enabled-toggled(bool);
    callback layer-rule-shadow-softness-changed(int);
    callback layer-rule-shadow-spread-changed(int);
    callback layer-rule-shadow-offset-x-changed(int);
    callback layer-rule-shadow-offset-y-changed(int);
    callback layer-rule-shadow-draw-behind-toggled(bool);
    callback layer-rule-shadow-color-changed(color);
    callback layer-rule-shadow-inactive-color-changed(color);

    // Keybindings callbacks
    callback keybindings-refresh();
    callback keybinding-selected(int);
    callback keybinding-add();
    callback keybinding-edit();
    callback keybinding-delete(int);
    callback keybindings-import();
    callback keybindings-import-from-file();
    callback keybinding-editor-close();
    callback keybinding-key-combo-changed(string);
    callback keybinding-raw-key-pressed(/* text */ string, /* meta */ bool, /* ctrl */ bool, /* alt */ bool, /* shift */ bool);
    callback keybinding-action-type-changed(int);
    callback keybinding-action-command-changed(string);
    callback keybinding-action-name-changed(string);
    callback keybinding-allow-when-locked-changed(bool);
    callback keybinding-repeat-changed(bool);
    callback keybinding-cooldown-changed(int);
    callback keybinding-overlay-title-changed(string);

    // Startup command callbacks
    callback startup-add-command();
    callback startup-remove-command(int);
    callback startup-select-command(int);
    callback startup-command-changed(string);
    callback startup-reorder-command(int, int);

    // Environment variable callbacks
    callback environment-add-variable();
    callback environment-remove-variable(int);
    callback environment-select-variable(int);
    callback environment-name-changed(string);
    callback environment-value-changed(string);
    callback environment-reorder-variable(int, int);

    // Debug callbacks
    callback debug-expert-mode-toggled(bool);
    callback debug-preview-render-toggled(bool);
    callback debug-enable-overlay-planes-toggled(bool);
    callback debug-disable-cursor-plane-toggled(bool);
    callback debug-disable-direct-scanout-toggled(bool);
    callback debug-restrict-primary-scanout-to-matching-format-toggled(bool);
    callback debug-render-drm-device-changed(string);
    callback debug-ignore-drm-devices-changed(string);
    callback debug-wait-for-frame-completion-toggled(bool);
    callback debug-disable-resize-throttling-toggled(bool);
    callback debug-disable-transactions-toggled(bool);
    callback debug-emulate-zero-presentation-time-toggled(bool);
    callback debug-skip-cursor-only-updates-during-vrr-toggled(bool);
    callback debug-dbus-interfaces-in-non-session-toggled(bool);
    callback debug-keep-laptop-panel-on-lid-closed-toggled(bool);
    callback debug-disable-monitor-names-toggled(bool);
    callback debug-force-disable-connectors-on-resume-toggled(bool);
    callback debug-strict-new-window-focus-toggled(bool);
    callback debug-honor-xdg-activation-with-invalid-serial-toggled(bool);
    callback debug-deactivate-unfocused-windows-toggled(bool);
    callback debug-force-pipewire-invalid-modifier-toggled(bool);

    // Switch events callbacks: lid-close
    callback switch-lid-close-add();
    callback switch-lid-close-remove(int);
    callback switch-lid-close-select(int);
    callback switch-lid-close-changed(string);

    // Switch events callbacks: lid-open
    callback switch-lid-open-add();
    callback switch-lid-open-remove(int);
    callback switch-lid-open-select(int);
    callback switch-lid-open-changed(string);

    // Switch events callbacks: tablet-mode-on
    callback switch-tablet-mode-on-add();
    callback switch-tablet-mode-on-remove(int);
    callback switch-tablet-mode-on-select(int);
    callback switch-tablet-mode-on-changed(string);

    // Switch events callbacks: tablet-mode-off
    callback switch-tablet-mode-off-add();
    callback switch-tablet-mode-off-remove(int);
    callback switch-tablet-mode-off-select(int);
    callback switch-tablet-mode-off-changed(string);

    // Recent windows callbacks
    callback recent-windows-enabled-toggled(bool);
    callback recent-windows-debounce-ms-changed(int);
    callback recent-windows-open-delay-ms-changed(int);
    callback recent-windows-highlight-active-color-changed(color);
    callback recent-windows-highlight-urgent-color-changed(color);
    callback recent-windows-highlight-padding-changed(int);
    callback recent-windows-highlight-corner-radius-changed(int);
    callback recent-windows-previews-max-height-changed(int);
    callback recent-windows-previews-max-scale-changed(float);

    // Category names for display
    property <[string]> category-names: [
        "Appearance",
        "Behavior",
        "Keyboard",
        "Mouse",
        "Touchpad",
        "Displays",
        "Animations",
        "Cursor",
        "Overview",
        "Layout Extras",
        "Gestures",
        "Miscellaneous",
        "Window Rules",
        "Input Devices",
        "Workspaces",
        "Layer Rules",
        "Trackpoint",
        "Trackball",
        "Tablet",
        "Touch",
        "Keybindings",
        "Startup",
        "Environment"
    ];

    // Navigation state - maps to actual category indices
    in-out property <int> nav-group: 0;
    in-out property <int> nav-page: 0;

    // Computed category accent based on nav-group
    property <color> category-accent:
        nav-group == 0 ? Theme.accent-visual :   // Appearance
        nav-group == 1 ? Theme.accent-input :    // Input
        nav-group == 2 ? Theme.accent-visual :   // Visuals
        nav-group == 3 ? Theme.accent-layout :   // Layout
        nav-group == 4 ? Theme.accent-rules :    // Rules
        Theme.accent-system;                      // System

    // Map (group, page) to actual SidebarIndices
    function compute-category(group: int, page: int) -> int {
        // Appearance group
        if group == 0 { return SidebarIndices.appearance; }
        // Input group
        if group == 1 {
            if page == 0 { return SidebarIndices.keyboard; }
            if page == 1 { return SidebarIndices.mouse; }
            if page == 2 { return SidebarIndices.touchpad; }
            if page == 3 { return SidebarIndices.trackpoint; }
            if page == 4 { return SidebarIndices.trackball; }
            if page == 5 { return SidebarIndices.tablet; }
            if page == 6 { return SidebarIndices.touch; }
            return SidebarIndices.displays;
        }
        // Visuals group
        if group == 2 {
            if page == 0 { return SidebarIndices.animations; }
            if page == 1 { return SidebarIndices.cursor; }
            if page == 2 { return SidebarIndices.overview; }
            return SidebarIndices.recent-windows;
        }
        // Layout group
        if group == 3 {
            if page == 0 { return SidebarIndices.behavior; }
            if page == 1 { return SidebarIndices.layout-extras; }
            return SidebarIndices.workspaces;
        }
        // Rules group
        if group == 4 {
            if page == 0 { return SidebarIndices.window-rules; }
            if page == 1 { return SidebarIndices.layer-rules; }
            return SidebarIndices.gestures;
        }
        // System group
        if page == 0 { return SidebarIndices.keybindings; }
        if page == 1 { return SidebarIndices.startup; }
        if page == 2 { return SidebarIndices.environment; }
        if page == 3 { return SidebarIndices.switch-events; }
        if page == 4 { return SidebarIndices.miscellaneous; }
        return SidebarIndices.debug;
    }

    // Reverse mapping: category index to group
    function category-to-group(category: int) -> int {
        if category == SidebarIndices.appearance { return 0; }
        // Input group
        if category == SidebarIndices.keyboard { return 1; }
        if category == SidebarIndices.mouse { return 1; }
        if category == SidebarIndices.touchpad { return 1; }
        if category == SidebarIndices.trackpoint { return 1; }
        if category == SidebarIndices.trackball { return 1; }
        if category == SidebarIndices.tablet { return 1; }
        if category == SidebarIndices.touch { return 1; }
        if category == SidebarIndices.displays { return 1; }
        // Visuals group
        if category == SidebarIndices.animations { return 2; }
        if category == SidebarIndices.cursor { return 2; }
        if category == SidebarIndices.overview { return 2; }
        if category == SidebarIndices.recent-windows { return 2; }
        // Layout group
        if category == SidebarIndices.behavior { return 3; }
        if category == SidebarIndices.layout-extras { return 3; }
        if category == SidebarIndices.workspaces { return 3; }
        // Rules group
        if category == SidebarIndices.window-rules { return 4; }
        if category == SidebarIndices.layer-rules { return 4; }
        if category == SidebarIndices.gestures { return 4; }
        // System group (default)
        return 5;
    }

    // Reverse mapping: category index to page within group
    function category-to-page(category: int) -> int {
        // Appearance group has only one page
        if category == SidebarIndices.appearance { return 0; }
        // Input group
        if category == SidebarIndices.keyboard { return 0; }
        if category == SidebarIndices.mouse { return 1; }
        if category == SidebarIndices.touchpad { return 2; }
        if category == SidebarIndices.trackpoint { return 3; }
        if category == SidebarIndices.trackball { return 4; }
        if category == SidebarIndices.tablet { return 5; }
        if category == SidebarIndices.touch { return 6; }
        if category == SidebarIndices.displays { return 7; }
        // Visuals group
        if category == SidebarIndices.animations { return 0; }
        if category == SidebarIndices.cursor { return 1; }
        if category == SidebarIndices.overview { return 2; }
        if category == SidebarIndices.recent-windows { return 3; }
        // Layout group
        if category == SidebarIndices.behavior { return 0; }
        if category == SidebarIndices.layout-extras { return 1; }
        if category == SidebarIndices.workspaces { return 2; }
        // Rules group
        if category == SidebarIndices.window-rules { return 0; }
        if category == SidebarIndices.layer-rules { return 1; }
        if category == SidebarIndices.gestures { return 2; }
        // System group
        if category == SidebarIndices.keybindings { return 0; }
        if category == SidebarIndices.startup { return 1; }
        if category == SidebarIndices.environment { return 2; }
        if category == SidebarIndices.switch-events { return 3; }
        if category == SidebarIndices.miscellaneous { return 4; }
        if category == SidebarIndices.debug { return 5; }
        return 0;
    }

    VerticalLayout {
        // Horizontal category navigation bar
        CategoryNav {
            selected-group <=> nav-group;
            selected-page <=> nav-page;
            show-debug-options <=> root.show-debug-options;

            group-changed(group) => {
                selected-category = compute-category(group, 0);
                category-changed(selected-category);
            }
            page-changed(page) => {
                selected-category = compute-category(nav-group, page);
                category-changed(selected-category);
            }
        }

        // Search bar
        search-bar-container := Rectangle {
            height: 48px;
            background: Theme.background;

            HorizontalLayout {
                padding-left: Theme.spacing-xl;
                padding-right: Theme.spacing-xl;
                padding-top: Theme.spacing-xs;
                padding-bottom: Theme.spacing-xs;
                spacing: Theme.spacing-md;

                SearchBar {
                    text <=> search-text;
                    horizontal-stretch: 1;
                    search-changed(query) => { root.search-changed(query); }
                }

                // Review Changes button
                Rectangle {
                    width: 120px;
                    height: 32px;
                    background: review-touch.has-hover ? Theme.surface-elevated : Theme.control-background;
                    border-radius: Theme.radius-md;
                    border-width: 1px;
                    border-color: Theme.border;

                    review-touch := TouchArea {
                        mouse-cursor: pointer;
                        clicked => { root.review-changes-requested(); }
                    }

                    HorizontalLayout {
                        padding: Theme.spacing-sm;
                        alignment: center;

                        Text {
                            text: "Review Changes";
                            color: Theme.text-secondary;
                            font-size: Theme.font-size-sm;
                            horizontal-alignment: center;
                            vertical-alignment: center;
                        }
                    }
                }
            }
        }

        // Content panel (full width, no sidebar)
        Rectangle {
            background: Theme.background;
            vertical-stretch: 1;

            // Page content based on selected category
            if selected-category == SidebarIndices.appearance: AppearancePage {
                        sub-page: nav-group == 0 ? nav-page : 0;  // Pass sub-page when in Appearance group
                        focus-ring-enabled <=> root.focus-ring-enabled;
                        focus-ring-width <=> root.focus-ring-width;
                        focus-ring-active-color <=> root.focus-ring-active-color;
                        focus-ring-inactive-color <=> root.focus-ring-inactive-color;
                        focus-ring-urgent-color <=> root.focus-ring-urgent-color;
                        focus-ring-active-hex <=> root.focus-ring-active-hex;
                        focus-ring-inactive-hex <=> root.focus-ring-inactive-hex;
                        focus-ring-urgent-hex <=> root.focus-ring-urgent-hex;
                        border-enabled <=> root.border-enabled;
                        border-thickness <=> root.border-thickness;
                        border-active-color <=> root.border-active-color;
                        border-inactive-color <=> root.border-inactive-color;
                        border-urgent-color <=> root.border-urgent-color;
                        border-active-hex <=> root.border-active-hex;
                        border-inactive-hex <=> root.border-inactive-hex;
                        border-urgent-hex <=> root.border-urgent-hex;
                        gaps-inner <=> root.gaps-inner;
                        gaps-outer <=> root.gaps-outer;
                        corner-radius <=> root.corner-radius;
                        background-color <=> root.background-color;
                        background-color-hex <=> root.background-color-hex;

                        focus-ring-toggled(val) => { root.focus-ring-toggled(val); }
                        focus-ring-width-changed(val) => { root.focus-ring-width-changed(val); }
                        focus-ring-active-color-changed(col) => { root.focus-ring-active-color-changed(col); }
                        focus-ring-inactive-color-changed(col) => { root.focus-ring-inactive-color-changed(col); }
                        focus-ring-urgent-color-changed(col) => { root.focus-ring-urgent-color-changed(col); }
                        border-toggled(val) => { root.border-toggled(val); }
                        border-thickness-changed(val) => { root.border-thickness-changed(val); }
                        border-active-color-changed(col) => { root.border-active-color-changed(col); }
                        border-inactive-color-changed(col) => { root.border-inactive-color-changed(col); }
                        border-urgent-color-changed(col) => { root.border-urgent-color-changed(col); }
                        gaps-inner-changed(val) => { root.gaps-inner-changed(val); }
                        gaps-outer-changed(val) => { root.gaps-outer-changed(val); }
                        corner-radius-changed(val) => { root.corner-radius-changed(val); }
                        background-color-changed(col) => { root.background-color-changed(col); }
                    }

                    if selected-category == SidebarIndices.behavior: BehaviorPage {
                        focus-follows-mouse <=> root.focus-follows-mouse;
                        warp-mouse-to-focus <=> root.warp-mouse-to-focus;
                        center-focused-column <=> root.center-focused-column;
                        always-center-single-column <=> root.always-center-single-column;
                        default-column-width-index <=> root.default-column-width-index;
                        default-column-width-proportion <=> root.default-column-width-proportion;
                        default-column-width-fixed <=> root.default-column-width-fixed;
                        strut-left <=> root.strut-left;
                        strut-right <=> root.strut-right;
                        strut-top <=> root.strut-top;
                        strut-bottom <=> root.strut-bottom;
                        mod-key-index <=> root.mod-key-index;
                        mod-key-nested-enabled <=> root.mod-key-nested-enabled;
                        mod-key-nested-index <=> root.mod-key-nested-index;
                        disable-power-key-handling <=> root.disable-power-key-handling;

                        focus-follows-mouse-toggled(val) => { root.focus-follows-mouse-toggled(val); }
                        warp-mouse-to-focus-toggled(val) => { root.warp-mouse-to-focus-toggled(val); }
                        center-focused-column-toggled(val) => { root.center-focused-column-toggled(val); }
                        always-center-single-column-toggled(val) => { root.always-center-single-column-toggled(val); }
                        default-column-width-type-changed(idx) => { root.default-column-width-type-changed(idx); }
                        default-column-width-proportion-changed(val) => { root.default-column-width-proportion-changed(val); }
                        default-column-width-fixed-changed(val) => { root.default-column-width-fixed-changed(val); }
                        strut-left-changed(val) => { root.strut-left-changed(val); }
                        strut-right-changed(val) => { root.strut-right-changed(val); }
                        strut-top-changed(val) => { root.strut-top-changed(val); }
                        strut-bottom-changed(val) => { root.strut-bottom-changed(val); }
                        mod-key-changed(idx) => { root.mod-key-changed(idx); }
                        mod-key-nested-enabled-toggled(val) => { root.mod-key-nested-enabled-toggled(val); }
                        mod-key-nested-changed(idx) => { root.mod-key-nested-changed(idx); }
                        disable-power-key-handling-toggled(val) => { root.disable-power-key-handling-toggled(val); }
                    }

                    if selected-category == SidebarIndices.keyboard: KeyboardPage {
                        off <=> root.keyboard-off;
                        xkb-layout <=> root.xkb-layout;
                        xkb-variant <=> root.xkb-variant;
                        xkb-model <=> root.xkb-model;
                        xkb-rules <=> root.xkb-rules;
                        xkb-options <=> root.xkb-options;
                        xkb-file <=> root.xkb-file;
                        repeat-delay <=> root.repeat-delay;
                        repeat-rate <=> root.repeat-rate;
                        numlock <=> root.numlock;
                        track-layout-index <=> root.track-layout-index;

                        off-toggled(val) => { root.keyboard-off-toggled(val); }
                        xkb-layout-changed(val) => { root.xkb-layout-changed(val); }
                        xkb-variant-changed(val) => { root.xkb-variant-changed(val); }
                        xkb-model-changed(val) => { root.xkb-model-changed(val); }
                        xkb-rules-changed(val) => { root.xkb-rules-changed(val); }
                        xkb-options-changed(val) => { root.xkb-options-changed(val); }
                        xkb-file-changed(val) => { root.xkb-file-changed(val); }
                        repeat-delay-changed(val) => { root.repeat-delay-changed(val); }
                        repeat-rate-changed(val) => { root.repeat-rate-changed(val); }
                        numlock-toggled(val) => { root.numlock-toggled(val); }
                        track-layout-changed(idx) => { root.track-layout-changed(idx); }
                    }

                    if selected-category == SidebarIndices.mouse: MousePage {
                        off <=> root.mouse-off;
                        natural-scroll <=> root.mouse-natural-scroll;
                        left-handed <=> root.mouse-left-handed;
                        accel-speed <=> root.mouse-accel-speed;
                        accel-profile-index <=> root.mouse-accel-profile-index;
                        scroll-factor <=> root.mouse-scroll-factor;
                        scroll-method-index <=> root.mouse-scroll-method-index;
                        middle-emulation <=> root.mouse-middle-emulation;
                        scroll-button <=> root.mouse-scroll-button;
                        scroll-button-lock <=> root.mouse-scroll-button-lock;

                        off-toggled(val) => { root.mouse-off-toggled(val); }
                        natural-scroll-toggled(val) => { root.mouse-natural-scroll-toggled(val); }
                        left-handed-toggled(val) => { root.mouse-left-handed-toggled(val); }
                        accel-speed-changed(val) => { root.mouse-accel-speed-changed(val); }
                        accel-profile-changed(idx) => { root.mouse-accel-profile-changed(idx); }
                        scroll-factor-changed(val) => { root.mouse-scroll-factor-changed(val); }
                        scroll-method-changed(idx) => { root.mouse-scroll-method-changed(idx); }
                        middle-emulation-toggled(val) => { root.mouse-middle-emulation-toggled(val); }
                        scroll-button-changed(val) => { root.mouse-scroll-button-changed(val); }
                        scroll-button-lock-toggled(val) => { root.mouse-scroll-button-lock-toggled(val); }
                    }

                    if selected-category == SidebarIndices.touchpad: TouchpadPage {
                        off <=> root.touchpad-off;
                        tap <=> root.touchpad-tap;
                        tap-button-map-index <=> root.touchpad-tap-button-map-index;
                        natural-scroll <=> root.touchpad-natural-scroll;
                        scroll-method-index <=> root.touchpad-scroll-method-index;
                        scroll-factor <=> root.touchpad-scroll-factor;
                        click-method-index <=> root.touchpad-click-method-index;
                        middle-emulation <=> root.touchpad-middle-emulation;
                        left-handed <=> root.touchpad-left-handed;
                        dwt <=> root.touchpad-dwt;
                        dwtp <=> root.touchpad-dwtp;
                        drag <=> root.touchpad-drag;
                        drag-lock <=> root.touchpad-drag-lock;
                        accel-speed <=> root.touchpad-accel-speed;
                        accel-profile-index <=> root.touchpad-accel-profile-index;
                        disabled-on-external-mouse <=> root.touchpad-disabled-on-external-mouse;
                        scroll-button <=> root.touchpad-scroll-button;
                        scroll-button-lock <=> root.touchpad-scroll-button-lock;

                        off-toggled(val) => { root.touchpad-off-toggled(val); }
                        tap-toggled(val) => { root.touchpad-tap-toggled(val); }
                        tap-button-map-changed(idx) => { root.touchpad-tap-button-map-changed(idx); }
                        natural-scroll-toggled(val) => { root.touchpad-natural-scroll-toggled(val); }
                        scroll-method-changed(idx) => { root.touchpad-scroll-method-changed(idx); }
                        scroll-factor-changed(val) => { root.touchpad-scroll-factor-changed(val); }
                        click-method-changed(idx) => { root.touchpad-click-method-changed(idx); }
                        middle-emulation-toggled(val) => { root.touchpad-middle-emulation-toggled(val); }
                        left-handed-toggled(val) => { root.touchpad-left-handed-toggled(val); }
                        dwt-toggled(val) => { root.touchpad-dwt-toggled(val); }
                        dwtp-toggled(val) => { root.touchpad-dwtp-toggled(val); }
                        drag-toggled(val) => { root.touchpad-drag-toggled(val); }
                        drag-lock-toggled(val) => { root.touchpad-drag-lock-toggled(val); }
                        accel-speed-changed(val) => { root.touchpad-accel-speed-changed(val); }
                        accel-profile-changed(idx) => { root.touchpad-accel-profile-changed(idx); }
                        disabled-on-external-mouse-toggled(val) => { root.touchpad-disabled-on-external-mouse-toggled(val); }
                        scroll-button-changed(val) => { root.touchpad-scroll-button-changed(val); }
                        scroll-button-lock-toggled(val) => { root.touchpad-scroll-button-lock-toggled(val); }
                    }

                    if selected-category == SidebarIndices.cursor: CursorPage {
                        cursor-theme <=> root.cursor-theme;
                        cursor-size <=> root.cursor-size;
                        hide-when-typing <=> root.hide-when-typing;
                        hide-after-inactive-enabled <=> root.hide-after-inactive-enabled;
                        hide-after-inactive-ms <=> root.hide-after-inactive-ms;

                        cursor-theme-changed(val) => { root.cursor-theme-changed(val); }
                        cursor-size-changed(val) => { root.cursor-size-changed(val); }
                        hide-when-typing-toggled(val) => { root.hide-when-typing-toggled(val); }
                        hide-after-inactive-toggled(val) => { root.hide-after-inactive-toggled(val); }
                        hide-after-inactive-ms-changed(val) => { root.hide-after-inactive-ms-changed(val); }
                    }

                    if selected-category == SidebarIndices.animations: AnimationsPage {
                        // Global animation settings
                        animations-enabled <=> root.animations-enabled;
                        slowdown <=> root.animations-slowdown;

                        // Animation configurations model (replaces 66 individual property bindings)
                        animations-model: root.animations-model;

                        // Global callbacks
                        animations-toggled(val) => { root.animations-toggled(val); }
                        slowdown-changed(val) => { root.animations-slowdown-changed(val); }

                        // Indexed animation callbacks (6 total instead of 66)
                        animation-type-changed(id, val) => { root.animation-type-changed(id, val); }
                        animation-damping-changed(id, val) => { root.animation-damping-changed(id, val); }
                        animation-stiffness-changed(id, val) => { root.animation-stiffness-changed(id, val); }
                        animation-epsilon-changed(id, val) => { root.animation-epsilon-changed(id, val); }
                        animation-duration-changed(id, val) => { root.animation-duration-changed(id, val); }
                        animation-curve-changed(id, val) => { root.animation-curve-changed(id, val); }
                        // Cubic-bezier control point callbacks
                        animation-bezier-x1-changed(id, val) => { root.animation-bezier-x1-changed(id, val); }
                        animation-bezier-y1-changed(id, val) => { root.animation-bezier-y1-changed(id, val); }
                        animation-bezier-x2-changed(id, val) => { root.animation-bezier-x2-changed(id, val); }
                        animation-bezier-y2-changed(id, val) => { root.animation-bezier-y2-changed(id, val); }
                    }

                    if selected-category == SidebarIndices.overview: OverviewPage {
                        zoom <=> root.overview-zoom;
                        backdrop-enabled <=> root.overview-backdrop-enabled;
                        backdrop-color <=> root.overview-backdrop-color;
                        backdrop-hex <=> root.overview-backdrop-hex;

                        // Phase 8: Workspace shadow
                        workspace-shadow-enabled <=> root.overview-workspace-shadow-enabled;
                        workspace-shadow-softness <=> root.overview-workspace-shadow-softness;
                        workspace-shadow-spread <=> root.overview-workspace-shadow-spread;
                        workspace-shadow-offset-x <=> root.overview-workspace-shadow-offset-x;
                        workspace-shadow-offset-y <=> root.overview-workspace-shadow-offset-y;
                        workspace-shadow-color <=> root.overview-workspace-shadow-color;
                        workspace-shadow-color-hex <=> root.overview-workspace-shadow-color-hex;

                        zoom-changed(val) => { root.overview-zoom-changed(val); }
                        backdrop-toggled(val) => { root.overview-backdrop-toggled(val); }
                        backdrop-color-changed(col) => { root.overview-backdrop-color-changed(col); }

                        // Phase 8: Workspace shadow callbacks
                        workspace-shadow-toggled(val) => { root.overview-workspace-shadow-toggled(val); }
                        workspace-shadow-softness-changed(val) => { root.overview-workspace-shadow-softness-changed(val); }
                        workspace-shadow-spread-changed(val) => { root.overview-workspace-shadow-spread-changed(val); }
                        workspace-shadow-offset-x-changed(val) => { root.overview-workspace-shadow-offset-x-changed(val); }
                        workspace-shadow-offset-y-changed(val) => { root.overview-workspace-shadow-offset-y-changed(val); }
                        workspace-shadow-color-changed(col) => { root.overview-workspace-shadow-color-changed(col); }
                    }

                    if selected-category == SidebarIndices.displays: DisplaysPage {
                        expert-mode: root.debug-expert-mode;

                        output-list <=> root.output-list;
                        discovered-outputs <=> root.discovered-outputs;
                        output-names <=> root.output-names;
                        selected-output-index <=> root.selected-output-index;
                        current-output-name <=> root.current-output-name;
                        current-output-enabled <=> root.current-output-enabled;
                        current-output-scale <=> root.current-output-scale;
                        current-output-mode <=> root.current-output-mode;
                        current-output-pos-x <=> root.current-output-pos-x;
                        current-output-pos-y <=> root.current-output-pos-y;
                        current-output-transform-index <=> root.current-output-transform-index;
                        current-output-vrr-index <=> root.current-output-vrr-index;
                        new-output-name <=> root.new-output-name;

                        // Mode dropdown
                        available-modes <=> root.available-modes;
                        selected-mode-index <=> root.selected-mode-index;
                        use-custom-mode <=> root.use-custom-mode;

                        // Phase 8: Custom mode/modeline
                        current-output-mode-custom <=> root.current-output-mode-custom;
                        current-output-modeline <=> root.current-output-modeline;

                        // Phase 8: Per-output hot corners
                        current-output-hot-corners-enabled <=> root.current-output-hot-corners-enabled;
                        current-output-hc-override-enabled <=> root.current-output-hc-override-enabled;
                        current-output-hc-top-left <=> root.current-output-hc-top-left;
                        current-output-hc-top-right <=> root.current-output-hc-top-right;
                        current-output-hc-bottom-left <=> root.current-output-hc-bottom-left;
                        current-output-hc-bottom-right <=> root.current-output-hc-bottom-right;

                        // Phase 8: Per-output layout override
                        current-output-layout-override-enabled <=> root.current-output-layout-override-enabled;
                        current-output-layout-gaps-inner <=> root.current-output-layout-gaps-inner;
                        current-output-layout-gaps-outer <=> root.current-output-layout-gaps-outer;
                        current-output-layout-struts-left <=> root.current-output-layout-struts-left;
                        current-output-layout-struts-right <=> root.current-output-layout-struts-right;
                        current-output-layout-struts-top <=> root.current-output-layout-struts-top;
                        current-output-layout-struts-bottom <=> root.current-output-layout-struts-bottom;
                        current-output-layout-center-index <=> root.current-output-layout-center-index;

                        add-output(name) => { root.output-add(name); }
                        remove-output(idx) => { root.output-remove(idx); }
                        select-output(idx) => { root.output-select(idx); }
                        discover-outputs() => { root.output-discover(); }
                        output-enabled-toggled(val) => { root.output-enabled-toggled(val); }
                        output-scale-changed(val) => { root.output-scale-changed(val); }
                        output-mode-changed(val) => { root.output-mode-changed(val); }
                        output-pos-x-changed(val) => { root.output-pos-x-changed(val); }
                        output-pos-y-changed(val) => { root.output-pos-y-changed(val); }
                        output-transform-changed(idx) => { root.output-transform-changed(idx); }
                        output-vrr-changed(idx) => { root.output-vrr-changed(idx); }

                        // Mode dropdown callbacks
                        output-mode-selected(idx) => { root.output-mode-selected(idx); }
                        use-custom-mode-toggled(val) => { root.use-custom-mode-toggled(val); }

                        // Phase 8 callbacks
                        output-mode-custom-toggled(val) => { root.output-mode-custom-toggled(val); }
                        output-modeline-changed(val) => { root.output-modeline-changed(val); }
                        output-hc-override-toggled(val) => { root.output-hc-override-toggled(val); }
                        output-hc-enabled-toggled(val) => { root.output-hc-enabled-toggled(val); }
                        output-hc-top-left-toggled(val) => { root.output-hc-top-left-toggled(val); }
                        output-hc-top-right-toggled(val) => { root.output-hc-top-right-toggled(val); }
                        output-hc-bottom-left-toggled(val) => { root.output-hc-bottom-left-toggled(val); }
                        output-hc-bottom-right-toggled(val) => { root.output-hc-bottom-right-toggled(val); }
                        output-layout-override-toggled(val) => { root.output-layout-override-toggled(val); }
                        output-layout-gaps-inner-changed(val) => { root.output-layout-gaps-inner-changed(val); }
                        output-layout-gaps-outer-changed(val) => { root.output-layout-gaps-outer-changed(val); }
                        output-layout-struts-left-changed(val) => { root.output-layout-struts-left-changed(val); }
                        output-layout-struts-right-changed(val) => { root.output-layout-struts-right-changed(val); }
                        output-layout-struts-top-changed(val) => { root.output-layout-struts-top-changed(val); }
                        output-layout-struts-bottom-changed(val) => { root.output-layout-struts-bottom-changed(val); }
                        output-layout-center-changed(idx) => { root.output-layout-center-changed(idx); }
                    }

                    if selected-category == SidebarIndices.layout-extras: LayoutExtrasPage {
                        shadow-enabled <=> root.shadow-enabled;
                        shadow-softness <=> root.shadow-softness;
                        shadow-spread <=> root.shadow-spread;
                        shadow-offset-x <=> root.shadow-offset-x;
                        shadow-offset-y <=> root.shadow-offset-y;
                        shadow-draw-behind <=> root.shadow-draw-behind;
                        shadow-color <=> root.shadow-color;
                        shadow-inactive-color <=> root.shadow-inactive-color;
                        shadow-color-hex <=> root.shadow-color-hex;
                        shadow-inactive-color-hex <=> root.shadow-inactive-color-hex;

                        tab-indicator-enabled <=> root.tab-indicator-enabled;
                        tab-indicator-hide-single <=> root.tab-indicator-hide-single;
                        tab-indicator-within-column <=> root.tab-indicator-within-column;
                        tab-indicator-gap <=> root.tab-indicator-gap;
                        tab-indicator-width <=> root.tab-indicator-width;
                        tab-indicator-position-index <=> root.tab-indicator-position-index;
                        tab-indicator-corner-radius <=> root.tab-indicator-corner-radius;
                        tab-indicator-gaps-between <=> root.tab-indicator-gaps-between;
                        tab-indicator-active-color <=> root.tab-indicator-active-color;
                        tab-indicator-inactive-color <=> root.tab-indicator-inactive-color;
                        tab-indicator-urgent-color <=> root.tab-indicator-urgent-color;
                        tab-indicator-active-hex <=> root.tab-indicator-active-hex;
                        tab-indicator-inactive-hex <=> root.tab-indicator-inactive-hex;
                        tab-indicator-urgent-hex <=> root.tab-indicator-urgent-hex;

                        insert-hint-enabled <=> root.insert-hint-enabled;
                        insert-hint-color <=> root.insert-hint-color;
                        insert-hint-color-hex <=> root.insert-hint-color-hex;

                        shadow-toggled(val) => { root.shadow-toggled(val); }
                        shadow-softness-changed(val) => { root.shadow-softness-changed(val); }
                        shadow-spread-changed(val) => { root.shadow-spread-changed(val); }
                        shadow-offset-x-changed(val) => { root.shadow-offset-x-changed(val); }
                        shadow-offset-y-changed(val) => { root.shadow-offset-y-changed(val); }
                        shadow-draw-behind-toggled(val) => { root.shadow-draw-behind-toggled(val); }
                        shadow-color-changed(col) => { root.shadow-color-changed(col); }
                        shadow-inactive-color-changed(col) => { root.shadow-inactive-color-changed(col); }

                        tab-indicator-toggled(val) => { root.tab-indicator-toggled(val); }
                        tab-indicator-hide-single-toggled(val) => { root.tab-indicator-hide-single-toggled(val); }
                        tab-indicator-within-column-toggled(val) => { root.tab-indicator-within-column-toggled(val); }
                        tab-indicator-gap-changed(val) => { root.tab-indicator-gap-changed(val); }
                        tab-indicator-width-changed(val) => { root.tab-indicator-width-changed(val); }
                        tab-indicator-position-changed(idx) => { root.tab-indicator-position-changed(idx); }
                        tab-indicator-corner-radius-changed(val) => { root.tab-indicator-corner-radius-changed(val); }
                        tab-indicator-gaps-between-changed(val) => { root.tab-indicator-gaps-between-changed(val); }
                        tab-indicator-active-color-changed(col) => { root.tab-indicator-active-color-changed(col); }
                        tab-indicator-inactive-color-changed(col) => { root.tab-indicator-inactive-color-changed(col); }
                        tab-indicator-urgent-color-changed(col) => { root.tab-indicator-urgent-color-changed(col); }

                        insert-hint-toggled(val) => { root.insert-hint-toggled(val); }
                        insert-hint-color-changed(col) => { root.insert-hint-color-changed(col); }
                    }

                    if selected-category == SidebarIndices.gestures: GesturesPage {
                        hot-corners-enabled <=> root.hot-corners-enabled;
                        hot-corner-top-left <=> root.hot-corner-top-left;
                        hot-corner-top-right <=> root.hot-corner-top-right;
                        hot-corner-bottom-left <=> root.hot-corner-bottom-left;
                        hot-corner-bottom-right <=> root.hot-corner-bottom-right;

                        dnd-edge-scroll-enabled <=> root.dnd-edge-scroll-enabled;
                        dnd-edge-scroll-trigger-width <=> root.dnd-edge-scroll-trigger-width;
                        dnd-edge-scroll-delay <=> root.dnd-edge-scroll-delay;
                        dnd-edge-scroll-max-speed <=> root.dnd-edge-scroll-max-speed;

                        dnd-workspace-switch-enabled <=> root.dnd-workspace-switch-enabled;
                        dnd-workspace-switch-trigger-height <=> root.dnd-workspace-switch-trigger-height;
                        dnd-workspace-switch-delay <=> root.dnd-workspace-switch-delay;
                        dnd-workspace-switch-max-speed <=> root.dnd-workspace-switch-max-speed;

                        hot-corners-toggled(val) => { root.hot-corners-toggled(val); }
                        hot-corner-top-left-toggled(val) => { root.hot-corner-top-left-toggled(val); }
                        hot-corner-top-right-toggled(val) => { root.hot-corner-top-right-toggled(val); }
                        hot-corner-bottom-left-toggled(val) => { root.hot-corner-bottom-left-toggled(val); }
                        hot-corner-bottom-right-toggled(val) => { root.hot-corner-bottom-right-toggled(val); }

                        dnd-edge-scroll-toggled(val) => { root.dnd-edge-scroll-toggled(val); }
                        dnd-edge-scroll-trigger-width-changed(val) => { root.dnd-edge-scroll-trigger-width-changed(val); }
                        dnd-edge-scroll-delay-changed(val) => { root.dnd-edge-scroll-delay-changed(val); }
                        dnd-edge-scroll-max-speed-changed(val) => { root.dnd-edge-scroll-max-speed-changed(val); }

                        dnd-workspace-switch-toggled(val) => { root.dnd-workspace-switch-toggled(val); }
                        dnd-workspace-switch-trigger-height-changed(val) => { root.dnd-workspace-switch-trigger-height-changed(val); }
                        dnd-workspace-switch-delay-changed(val) => { root.dnd-workspace-switch-delay-changed(val); }
                        dnd-workspace-switch-max-speed-changed(val) => { root.dnd-workspace-switch-max-speed-changed(val); }
                    }

                    if selected-category == SidebarIndices.miscellaneous: MiscellaneousPage {
                        prefer-no-csd <=> root.prefer-no-csd;
                        screenshot-path <=> root.screenshot-path;
                        disable-primary-clipboard <=> root.disable-primary-clipboard;
                        hotkey-overlay-skip <=> root.hotkey-overlay-skip;

                        // Phase 8: New settings
                        hotkey-overlay-hide-not-bound <=> root.hotkey-overlay-hide-not-bound;
                        config-notification-disable-failed <=> root.config-notification-disable-failed;

                        // New settings (v25.08+)
                        spawn-sh-at-startup <=> root.spawn-sh-at-startup;
                        xwayland-satellite-index <=> root.xwayland-satellite-index;
                        xwayland-satellite-path <=> root.xwayland-satellite-path;

                        // Developer options
                        show-debug-options <=> root.show-debug-options;

                        prefer-no-csd-toggled(val) => { root.prefer-no-csd-toggled(val); }
                        screenshot-path-changed(val) => { root.screenshot-path-changed(val); }
                        disable-primary-clipboard-toggled(val) => { root.disable-primary-clipboard-toggled(val); }
                        hotkey-overlay-skip-toggled(val) => { root.hotkey-overlay-skip-toggled(val); }

                        // Phase 8 callbacks
                        hotkey-overlay-hide-not-bound-toggled(val) => { root.hotkey-overlay-hide-not-bound-toggled(val); }
                        config-notification-disable-failed-toggled(val) => { root.config-notification-disable-failed-toggled(val); }

                        // New callbacks (v25.08+)
                        spawn-sh-at-startup-toggled(val) => { root.spawn-sh-at-startup-toggled(val); }
                        xwayland-satellite-mode-changed(idx) => { root.xwayland-satellite-mode-changed(idx); }
                        xwayland-satellite-path-changed(val) => { root.xwayland-satellite-path-changed(val); }

                        // Developer callbacks
                        show-debug-options-toggled(val) => { root.show-debug-options-toggled(val); }
                    }

                    if selected-category == SidebarIndices.window-rules: WindowRulesPage {
                        rule-list <=> root.window-rules-list;
                        selected-rule-index <=> root.selected-window-rule-index;
                        current-rule-name <=> root.current-rule-name;
                        // Multi-match properties
                        matches-list <=> root.current-matches-list;
                        selected-match-index <=> root.selected-match-index;
                        matches-count <=> root.current-matches-count;
                        current-match-app-id <=> root.current-match-app-id;
                        current-match-title <=> root.current-match-title;
                        current-match-is-floating <=> root.current-match-is-floating;
                        current-match-is-active <=> root.current-match-is-active;
                        current-match-is-focused <=> root.current-match-is-focused;
                        current-match-is-active-in-column <=> root.current-match-is-active-in-column;
                        current-match-is-window-cast-target <=> root.current-match-is-window-cast-target;
                        current-match-is-urgent <=> root.current-match-is-urgent;
                        current-match-at-startup <=> root.current-match-at-startup;
                        current-open-behavior-index <=> root.current-open-behavior-index;
                        current-has-opacity <=> root.current-has-opacity;
                        current-opacity <=> root.current-opacity;
                        current-block-screencast <=> root.current-block-screencast;
                        current-has-corner-radius <=> root.current-has-corner-radius;
                        current-corner-radius <=> root.current-corner-radius;
                        current-clip-to-geometry <=> root.current-clip-to-geometry;
                        current-open-on-output <=> root.current-open-on-output;
                        current-open-on-workspace <=> root.current-open-on-workspace;
                        // New dynamic properties
                        current-vrr-index <=> root.current-vrr-index;
                        current-column-display-index <=> root.current-column-display-index;
                        current-tiled-state-index <=> root.current-tiled-state-index;
                        current-baba-is-float <=> root.current-baba-is-float;
                        // Floating position
                        current-has-floating-position <=> root.current-has-floating-position;
                        current-floating-x <=> root.current-floating-x;
                        current-floating-y <=> root.current-floating-y;
                        current-floating-relative-to <=> root.current-floating-relative-to;
                        // Per-window shadow override
                        current-shadow-mode <=> root.current-shadow-mode;
                        current-shadow-softness <=> root.current-shadow-softness;
                        current-shadow-spread <=> root.current-shadow-spread;
                        current-shadow-offset-x <=> root.current-shadow-offset-x;
                        current-shadow-offset-y <=> root.current-shadow-offset-y;
                        current-shadow-color <=> root.current-shadow-color;
                        current-shadow-inactive-color <=> root.current-shadow-inactive-color;
                        current-shadow-draw-behind-window <=> root.current-shadow-draw-behind-window;
                        // Per-window tab-indicator override
                        current-tab-indicator-mode <=> root.current-tab-indicator-mode;
                        current-tab-indicator-hide-when-single <=> root.current-tab-indicator-hide-when-single;
                        current-tab-indicator-place-within-column <=> root.current-tab-indicator-place-within-column;
                        current-tab-indicator-gap <=> root.current-tab-indicator-gap;
                        current-tab-indicator-width <=> root.current-tab-indicator-width;
                        current-tab-indicator-length <=> root.current-tab-indicator-length;
                        current-tab-indicator-position <=> root.current-tab-indicator-position;
                        current-tab-indicator-gaps-between-tabs <=> root.current-tab-indicator-gaps-between-tabs;
                        current-tab-indicator-corner-radius <=> root.current-tab-indicator-corner-radius;
                        current-tab-indicator-active-color <=> root.current-tab-indicator-active-color;
                        current-tab-indicator-inactive-color <=> root.current-tab-indicator-inactive-color;
                        // Window picker
                        running-windows <=> root.running-windows-list;
                        show-window-picker <=> root.show-window-picker;

                        add-rule => { root.window-rule-add(); }
                        remove-rule(idx) => { root.window-rule-remove(idx); }
                        select-rule(idx) => { root.window-rule-select(idx); }
                        rule-name-changed(val) => { root.window-rule-name-changed(val); }
                        reorder-rule(from, to) => { root.window-rule-reorder(from, to); }
                        // Multi-match callbacks
                        add-match => { root.window-rule-add-match(); }
                        remove-match(idx) => { root.window-rule-remove-match(idx); }
                        select-match(idx) => { root.window-rule-select-match(idx); }
                        match-app-id-changed(val) => { root.window-rule-match-app-id-changed(val); }
                        match-title-changed(val) => { root.window-rule-match-title-changed(val); }
                        // Advanced match criteria callbacks
                        match-is-floating-changed(val) => { root.window-rule-match-is-floating-changed(val); }
                        match-is-active-changed(val) => { root.window-rule-match-is-active-changed(val); }
                        match-is-focused-changed(val) => { root.window-rule-match-is-focused-changed(val); }
                        match-is-active-in-column-changed(val) => { root.window-rule-match-is-active-in-column-changed(val); }
                        match-is-window-cast-target-changed(val) => { root.window-rule-match-is-window-cast-target-changed(val); }
                        match-is-urgent-changed(val) => { root.window-rule-match-is-urgent-changed(val); }
                        match-at-startup-changed(val) => { root.window-rule-match-at-startup-changed(val); }
                        // Window picker
                        refresh-windows => { root.window-rule-refresh-windows(); }
                        select-running-window(idx) => { root.window-rule-select-running-window(idx); }
                        open-behavior-changed(idx) => { root.window-rule-open-behavior-changed(idx); }
                        opacity-toggled(val) => { root.window-rule-opacity-toggled(val); }
                        opacity-changed(val) => { root.window-rule-opacity-changed(val); }
                        block-screencast-toggled(val) => { root.window-rule-block-screencast-toggled(val); }
                        corner-radius-toggled(val) => { root.window-rule-corner-radius-toggled(val); }
                        corner-radius-changed(val) => { root.window-rule-corner-radius-changed(val); }
                        clip-to-geometry-toggled(val) => { root.window-rule-clip-to-geometry-toggled(val); }
                        open-on-output-changed(val) => { root.window-rule-open-on-output-changed(val); }
                        open-on-workspace-changed(val) => { root.window-rule-open-on-workspace-changed(val); }
                        // New dynamic property callbacks
                        vrr-changed(val) => { root.window-rule-vrr-changed(val); }
                        column-display-changed(val) => { root.window-rule-column-display-changed(val); }
                        tiled-state-changed(val) => { root.window-rule-tiled-state-changed(val); }
                        baba-is-float-toggled(val) => { root.window-rule-baba-is-float-toggled(val); }
                        // Floating position callbacks
                        floating-position-toggled(val) => { root.window-rule-floating-position-toggled(val); }
                        floating-position-x-changed(val) => { root.window-rule-floating-position-x-changed(val); }
                        floating-position-y-changed(val) => { root.window-rule-floating-position-y-changed(val); }
                        floating-position-relative-to-changed(val) => { root.window-rule-floating-position-relative-to-changed(val); }
                        // Shadow override callbacks
                        shadow-mode-changed(val) => { root.window-rule-shadow-mode-changed(val); }
                        shadow-softness-changed(val) => { root.window-rule-shadow-softness-changed(val); }
                        shadow-spread-changed(val) => { root.window-rule-shadow-spread-changed(val); }
                        shadow-offset-x-changed(val) => { root.window-rule-shadow-offset-x-changed(val); }
                        shadow-offset-y-changed(val) => { root.window-rule-shadow-offset-y-changed(val); }
                        shadow-color-changed(val) => { root.window-rule-shadow-color-changed(val); }
                        shadow-inactive-color-changed(val) => { root.window-rule-shadow-inactive-color-changed(val); }
                        shadow-draw-behind-window-toggled(val) => { root.window-rule-shadow-draw-behind-window-toggled(val); }
                        // Tab indicator override callbacks
                        tab-indicator-mode-changed(val) => { root.window-rule-tab-indicator-mode-changed(val); }
                        tab-indicator-hide-when-single-toggled(val) => { root.window-rule-tab-indicator-hide-when-single-toggled(val); }
                        tab-indicator-place-within-column-toggled(val) => { root.window-rule-tab-indicator-place-within-column-toggled(val); }
                        tab-indicator-gap-changed(val) => { root.window-rule-tab-indicator-gap-changed(val); }
                        tab-indicator-width-changed(val) => { root.window-rule-tab-indicator-width-changed(val); }
                        tab-indicator-length-changed(val) => { root.window-rule-tab-indicator-length-changed(val); }
                        tab-indicator-position-changed(val) => { root.window-rule-tab-indicator-position-changed(val); }
                        tab-indicator-gaps-between-tabs-changed(val) => { root.window-rule-tab-indicator-gaps-between-tabs-changed(val); }
                        tab-indicator-corner-radius-changed(val) => { root.window-rule-tab-indicator-corner-radius-changed(val); }
                        tab-indicator-active-color-changed(val) => { root.window-rule-tab-indicator-active-color-changed(val); }
                        tab-indicator-inactive-color-changed(val) => { root.window-rule-tab-indicator-inactive-color-changed(val); }
                    }

                    // 
                    // TRACKPOINT PAGE (category 16)
                    // 
                    if selected-category == SidebarIndices.trackpoint: TrackpointPage {
                        off <=> root.trackpoint-off;
                        accel-speed <=> root.trackpoint-accel-speed;
                        accel-profile-index <=> root.trackpoint-accel-profile-index;
                        natural-scroll <=> root.trackpoint-natural-scroll;
                        left-handed <=> root.trackpoint-left-handed;
                        scroll-method-index <=> root.trackpoint-scroll-method-index;
                        scroll-button <=> root.trackpoint-scroll-button;
                        scroll-button-lock <=> root.trackpoint-scroll-button-lock;
                        middle-emulation <=> root.trackpoint-middle-emulation;

                        off-toggled(val) => { root.trackpoint-off-toggled(val); }
                        accel-speed-changed(val) => { root.trackpoint-accel-speed-changed(val); }
                        accel-profile-changed(idx) => { root.trackpoint-accel-profile-changed(idx); }
                        natural-scroll-toggled(val) => { root.trackpoint-natural-scroll-toggled(val); }
                        left-handed-toggled(val) => { root.trackpoint-left-handed-toggled(val); }
                        scroll-method-changed(idx) => { root.trackpoint-scroll-method-changed(idx); }
                        scroll-button-changed(val) => { root.trackpoint-scroll-button-changed(val); }
                        scroll-button-lock-toggled(val) => { root.trackpoint-scroll-button-lock-toggled(val); }
                        middle-emulation-toggled(val) => { root.trackpoint-middle-emulation-toggled(val); }
                    }

                    // 
                    // TRACKBALL PAGE (category 17)
                    // 
                    if selected-category == SidebarIndices.trackball: TrackballPage {
                        off <=> root.trackball-off;
                        accel-speed <=> root.trackball-accel-speed;
                        accel-profile-index <=> root.trackball-accel-profile-index;
                        natural-scroll <=> root.trackball-natural-scroll;
                        left-handed <=> root.trackball-left-handed;
                        scroll-method-index <=> root.trackball-scroll-method-index;
                        scroll-button <=> root.trackball-scroll-button;
                        scroll-button-lock <=> root.trackball-scroll-button-lock;
                        middle-emulation <=> root.trackball-middle-emulation;

                        off-toggled(val) => { root.trackball-off-toggled(val); }
                        accel-speed-changed(val) => { root.trackball-accel-speed-changed(val); }
                        accel-profile-changed(idx) => { root.trackball-accel-profile-changed(idx); }
                        natural-scroll-toggled(val) => { root.trackball-natural-scroll-toggled(val); }
                        left-handed-toggled(val) => { root.trackball-left-handed-toggled(val); }
                        scroll-method-changed(idx) => { root.trackball-scroll-method-changed(idx); }
                        scroll-button-changed(val) => { root.trackball-scroll-button-changed(val); }
                        scroll-button-lock-toggled(val) => { root.trackball-scroll-button-lock-toggled(val); }
                        middle-emulation-toggled(val) => { root.trackball-middle-emulation-toggled(val); }
                    }

                    // 
                    // TABLET PAGE (category 18)
                    // 
                    if selected-category == SidebarIndices.tablet: TabletPage {
                        off <=> root.tablet-off;
                        map-to-output <=> root.tablet-map-to-output;
                        left-handed <=> root.tablet-left-handed;
                        has-calibration <=> root.tablet-has-calibration;
                        cal-m0 <=> root.tablet-cal-m0;
                        cal-m1 <=> root.tablet-cal-m1;
                        cal-m2 <=> root.tablet-cal-m2;
                        cal-m3 <=> root.tablet-cal-m3;
                        cal-m4 <=> root.tablet-cal-m4;
                        cal-m5 <=> root.tablet-cal-m5;

                        off-toggled(val) => { root.tablet-off-toggled(val); }
                        map-to-output-changed(val) => { root.tablet-map-to-output-changed(val); }
                        left-handed-toggled(val) => { root.tablet-left-handed-toggled(val); }
                        calibration-toggled(val) => { root.tablet-calibration-toggled(val); }
                        calibration-changed(a, b, c, d, e, f) => { root.tablet-calibration-changed(a, b, c, d, e, f); }
                    }

                    // 
                    // TOUCH PAGE (category 19)
                    // 
                    if selected-category == SidebarIndices.touch: TouchPage {
                        off <=> root.touch-off;
                        map-to-output <=> root.touch-map-to-output;
                        has-calibration <=> root.touch-has-calibration;
                        cal-m0 <=> root.touch-cal-m0;
                        cal-m1 <=> root.touch-cal-m1;
                        cal-m2 <=> root.touch-cal-m2;
                        cal-m3 <=> root.touch-cal-m3;
                        cal-m4 <=> root.touch-cal-m4;
                        cal-m5 <=> root.touch-cal-m5;

                        off-toggled(val) => { root.touch-off-toggled(val); }
                        map-to-output-changed(val) => { root.touch-map-to-output-changed(val); }
                        calibration-toggled(val) => { root.touch-calibration-toggled(val); }
                        calibration-changed(a, b, c, d, e, f) => { root.touch-calibration-changed(a, b, c, d, e, f); }
                    }

                    if selected-category == SidebarIndices.workspaces: WorkspacesPage {
                        workspace-list <=> root.workspaces-list;
                        selected-workspace-index <=> root.selected-workspace-index;
                        current-workspace-name <=> root.current-workspace-name;
                        current-open-on-output <=> root.current-workspace-open-on-output;
                        current-has-layout-override <=> root.current-workspace-has-layout-override;
                        current-has-gaps-override <=> root.current-workspace-has-gaps-override;
                        current-gaps-inner <=> root.current-workspace-gaps-inner;
                        current-gaps-outer <=> root.current-workspace-gaps-outer;
                        current-has-struts-override <=> root.current-workspace-has-struts-override;
                        current-strut-left <=> root.current-workspace-strut-left;
                        current-strut-right <=> root.current-workspace-strut-right;
                        current-strut-top <=> root.current-workspace-strut-top;
                        current-strut-bottom <=> root.current-workspace-strut-bottom;
                        current-has-center-override <=> root.current-workspace-has-center-override;
                        current-center-focused-column-index <=> root.current-workspace-center-focused-column-index;
                        current-always-center-single-column <=> root.current-workspace-always-center-single-column;

                        add-workspace => { root.workspace-add(); }
                        remove-workspace(idx) => { root.workspace-remove(idx); }
                        select-workspace(idx) => { root.workspace-select(idx); }
                        workspace-name-changed(val) => { root.workspace-name-changed(val); }
                        open-on-output-changed(val) => { root.workspace-open-on-output-changed(val); }
                        layout-override-toggled(val) => { root.workspace-layout-override-toggled(val); }
                        gaps-override-toggled(val) => { root.workspace-gaps-override-toggled(val); }
                        gaps-inner-changed(val) => { root.workspace-gaps-inner-changed(val); }
                        gaps-outer-changed(val) => { root.workspace-gaps-outer-changed(val); }
                        struts-override-toggled(val) => { root.workspace-struts-override-toggled(val); }
                        strut-left-changed(val) => { root.workspace-strut-left-changed(val); }
                        strut-right-changed(val) => { root.workspace-strut-right-changed(val); }
                        strut-top-changed(val) => { root.workspace-strut-top-changed(val); }
                        strut-bottom-changed(val) => { root.workspace-strut-bottom-changed(val); }
                        center-override-toggled(val) => { root.workspace-center-override-toggled(val); }
                        center-focused-column-changed(idx) => { root.workspace-center-focused-column-changed(idx); }
                        always-center-single-column-toggled(val) => { root.workspace-always-center-single-column-toggled(val); }
                    }

                    if selected-category == SidebarIndices.layer-rules: LayerRulesPage {
                        rule-list <=> root.layer-rules-list;
                        selected-rule-index <=> root.selected-layer-rule-index;
                        current-rule-name <=> root.current-layer-rule-name;
                        matches-list <=> root.current-layer-rule-matches-list;
                        selected-match-index <=> root.selected-layer-rule-match-index;
                        matches-count <=> root.current-layer-rule-matches-count;
                        current-match-namespace <=> root.current-layer-rule-match-namespace;
                        current-match-at-startup <=> root.current-layer-rule-match-at-startup;
                        current-match-has-at-startup <=> root.current-layer-rule-match-has-at-startup;
                        current-has-block-out-from <=> root.current-layer-rule-has-block-out-from;
                        current-block-out-from-index <=> root.current-layer-rule-block-out-from-index;
                        current-has-opacity <=> root.current-layer-rule-has-opacity;
                        current-opacity <=> root.current-layer-rule-opacity;
                        current-has-corner-radius <=> root.current-layer-rule-has-corner-radius;
                        current-corner-radius <=> root.current-layer-rule-corner-radius;
                        current-place-within-backdrop <=> root.current-layer-rule-place-within-backdrop;
                        current-baba-is-float <=> root.current-layer-rule-baba-is-float;
                        current-has-shadow <=> root.current-layer-rule-has-shadow;
                        current-shadow-enabled <=> root.current-layer-rule-shadow-enabled;
                        current-shadow-softness <=> root.current-layer-rule-shadow-softness;
                        current-shadow-spread <=> root.current-layer-rule-shadow-spread;
                        current-shadow-offset-x <=> root.current-layer-rule-shadow-offset-x;
                        current-shadow-offset-y <=> root.current-layer-rule-shadow-offset-y;
                        current-shadow-draw-behind <=> root.current-layer-rule-shadow-draw-behind;
                        current-shadow-color <=> root.current-layer-rule-shadow-color;
                        current-shadow-inactive-color <=> root.current-layer-rule-shadow-inactive-color;
                        current-shadow-color-hex <=> root.current-layer-rule-shadow-color-hex;
                        current-shadow-inactive-color-hex <=> root.current-layer-rule-shadow-inactive-color-hex;

                        add-rule => { root.layer-rule-add(); }
                        remove-rule(idx) => { root.layer-rule-remove(idx); }
                        select-rule(idx) => { root.layer-rule-select(idx); }
                        rule-name-changed(val) => { root.layer-rule-name-changed(val); }
                        reorder-rule(from, to) => { root.layer-rule-reorder(from, to); }
                        add-match => { root.layer-rule-add-match(); }
                        remove-match(idx) => { root.layer-rule-remove-match(idx); }
                        select-match(idx) => { root.layer-rule-select-match(idx); }
                        match-namespace-changed(val) => { root.layer-rule-match-namespace-changed(val); }
                        match-at-startup-has-toggled(val) => { root.layer-rule-match-at-startup-has-toggled(val); }
                        match-at-startup-toggled(val) => { root.layer-rule-match-at-startup-toggled(val); }
                        block-out-from-toggled(val) => { root.layer-rule-block-out-from-toggled(val); }
                        block-out-from-changed(idx) => { root.layer-rule-block-out-from-changed(idx); }
                        opacity-toggled(val) => { root.layer-rule-opacity-toggled(val); }
                        opacity-changed(val) => { root.layer-rule-opacity-changed(val); }
                        corner-radius-toggled(val) => { root.layer-rule-corner-radius-toggled(val); }
                        corner-radius-changed(val) => { root.layer-rule-corner-radius-changed(val); }
                        place-within-backdrop-toggled(val) => { root.layer-rule-place-within-backdrop-toggled(val); }
                        baba-is-float-toggled(val) => { root.layer-rule-baba-is-float-toggled(val); }
                        shadow-toggled(val) => { root.layer-rule-shadow-toggled(val); }
                        shadow-enabled-toggled(val) => { root.layer-rule-shadow-enabled-toggled(val); }
                        shadow-softness-changed(val) => { root.layer-rule-shadow-softness-changed(val); }
                        shadow-spread-changed(val) => { root.layer-rule-shadow-spread-changed(val); }
                        shadow-offset-x-changed(val) => { root.layer-rule-shadow-offset-x-changed(val); }
                        shadow-offset-y-changed(val) => { root.layer-rule-shadow-offset-y-changed(val); }
                        shadow-draw-behind-toggled(val) => { root.layer-rule-shadow-draw-behind-toggled(val); }
                        shadow-color-changed(col) => { root.layer-rule-shadow-color-changed(col); }
                        shadow-inactive-color-changed(col) => { root.layer-rule-shadow-inactive-color-changed(col); }
                    }

                    // Keybindings page (full editing support)
                    if selected-category == SidebarIndices.keybindings: KeybindingsPage {
                        // List state
                        keybindings <=> root.keybindings-list;
                        selected-index <=> root.selected-keybinding-index;
                        loaded <=> root.keybindings-loaded;
                        source-file <=> root.keybindings-source-file;
                        error-message <=> root.keybindings-error;

                        // Editor state
                        editor-visible <=> root.keybinding-editor-visible;
                        edit-key-combo <=> root.edit-key-combo;
                        edit-key-parts <=> root.edit-key-parts;
                        edit-overlay-title <=> root.edit-overlay-title;
                        edit-allow-when-locked <=> root.edit-allow-when-locked;
                        edit-repeat <=> root.edit-repeat;
                        edit-cooldown <=> root.edit-cooldown;
                        edit-action-type <=> root.edit-action-type;
                        edit-action-command <=> root.edit-action-command;
                        edit-action-name <=> root.edit-action-name;

                        // Callbacks
                        refresh-keybindings => { root.keybindings-refresh(); }
                        keybinding-selected(idx) => { root.keybinding-selected(idx); }
                        keybinding-add => { root.keybinding-add(); }
                        keybinding-edit => { root.keybinding-edit(); }
                        keybinding-delete(idx) => { root.keybinding-delete(idx); }
                        keybindings-import => { root.keybindings-import(); }
                        keybindings-import-from-file => { root.keybindings-import-from-file(); }
                        keybinding-editor-close => { root.keybinding-editor-close(); }
                        key-combo-changed(val) => { root.keybinding-key-combo-changed(val); }
                        raw-key-pressed(text, meta, ctrl, alt, shift) => { root.keybinding-raw-key-pressed(text, meta, ctrl, alt, shift); }
                        action-type-changed(val) => { root.keybinding-action-type-changed(val); }
                        action-command-changed(val) => { root.keybinding-action-command-changed(val); }
                        action-name-changed(val) => { root.keybinding-action-name-changed(val); }
                        allow-when-locked-changed(val) => { root.keybinding-allow-when-locked-changed(val); }
                        repeat-changed(val) => { root.keybinding-repeat-changed(val); }
                        cooldown-changed(val) => { root.keybinding-cooldown-changed(val); }
                        overlay-title-changed(val) => { root.keybinding-overlay-title-changed(val); }
                    }

                    // Startup commands page
                    if selected-category == SidebarIndices.startup: StartupPage {
                        command-list <=> root.startup-command-list;
                        selected-command-index <=> root.selected-startup-index;
                        current-command <=> root.current-startup-command;

                        add-command => { root.startup-add-command(); }
                        remove-command(idx) => { root.startup-remove-command(idx); }
                        select-command(idx) => { root.startup-select-command(idx); }
                        command-changed(val) => { root.startup-command-changed(val); }
                        reorder-command(from, to) => { root.startup-reorder-command(from, to); }
                    }

                    // Environment variables page
                    if selected-category == SidebarIndices.environment: EnvironmentPage {
                        variable-list <=> root.environment-variable-list;
                        selected-variable-index <=> root.selected-environment-index;
                        current-name <=> root.current-env-name;
                        current-value <=> root.current-env-value;

                        add-variable => { root.environment-add-variable(); }
                        remove-variable(idx) => { root.environment-remove-variable(idx); }
                        select-variable(idx) => { root.environment-select-variable(idx); }
                        name-changed(val) => { root.environment-name-changed(val); }
                        value-changed(val) => { root.environment-value-changed(val); }
                        reorder-variable(from, to) => { root.environment-reorder-variable(from, to); }
                    }

                    // Debug settings page
                    if selected-category == SidebarIndices.debug: DebugPage {
                        // Niri status info
                        niri-version: root.niri-version;
                        niri-running: root.niri-running;
                        validate-requested => { root.validate-config-requested(); }

                        expert-mode <=> root.debug-expert-mode;

                        preview-render <=> root.debug-preview-render;
                        enable-overlay-planes <=> root.debug-enable-overlay-planes;
                        disable-cursor-plane <=> root.debug-disable-cursor-plane;
                        disable-direct-scanout <=> root.debug-disable-direct-scanout;
                        restrict-primary-scanout-to-matching-format <=> root.debug-restrict-primary-scanout-to-matching-format;
                        render-drm-device <=> root.debug-render-drm-device;
                        ignore-drm-devices <=> root.debug-ignore-drm-devices;
                        wait-for-frame-completion <=> root.debug-wait-for-frame-completion;
                        disable-resize-throttling <=> root.debug-disable-resize-throttling;
                        disable-transactions <=> root.debug-disable-transactions;
                        emulate-zero-presentation-time <=> root.debug-emulate-zero-presentation-time;
                        skip-cursor-only-updates-during-vrr <=> root.debug-skip-cursor-only-updates-during-vrr;
                        dbus-interfaces-in-non-session <=> root.debug-dbus-interfaces-in-non-session;
                        keep-laptop-panel-on-lid-closed <=> root.debug-keep-laptop-panel-on-lid-closed;
                        disable-monitor-names <=> root.debug-disable-monitor-names;
                        force-disable-connectors-on-resume <=> root.debug-force-disable-connectors-on-resume;
                        strict-new-window-focus <=> root.debug-strict-new-window-focus;
                        honor-xdg-activation-with-invalid-serial <=> root.debug-honor-xdg-activation-with-invalid-serial;
                        deactivate-unfocused-windows <=> root.debug-deactivate-unfocused-windows;
                        force-pipewire-invalid-modifier <=> root.debug-force-pipewire-invalid-modifier;

                        expert-mode-toggled(val) => { root.debug-expert-mode-toggled(val); }

                        preview-render-toggled(val) => { root.debug-preview-render-toggled(val); }
                        enable-overlay-planes-toggled(val) => { root.debug-enable-overlay-planes-toggled(val); }
                        disable-cursor-plane-toggled(val) => { root.debug-disable-cursor-plane-toggled(val); }
                        disable-direct-scanout-toggled(val) => { root.debug-disable-direct-scanout-toggled(val); }
                        restrict-primary-scanout-to-matching-format-toggled(val) => { root.debug-restrict-primary-scanout-to-matching-format-toggled(val); }
                        render-drm-device-changed(val) => { root.debug-render-drm-device-changed(val); }
                        ignore-drm-devices-changed(val) => { root.debug-ignore-drm-devices-changed(val); }
                        wait-for-frame-completion-toggled(val) => { root.debug-wait-for-frame-completion-toggled(val); }
                        disable-resize-throttling-toggled(val) => { root.debug-disable-resize-throttling-toggled(val); }
                        disable-transactions-toggled(val) => { root.debug-disable-transactions-toggled(val); }
                        emulate-zero-presentation-time-toggled(val) => { root.debug-emulate-zero-presentation-time-toggled(val); }
                        skip-cursor-only-updates-during-vrr-toggled(val) => { root.debug-skip-cursor-only-updates-during-vrr-toggled(val); }
                        dbus-interfaces-in-non-session-toggled(val) => { root.debug-dbus-interfaces-in-non-session-toggled(val); }
                        keep-laptop-panel-on-lid-closed-toggled(val) => { root.debug-keep-laptop-panel-on-lid-closed-toggled(val); }
                        disable-monitor-names-toggled(val) => { root.debug-disable-monitor-names-toggled(val); }
                        force-disable-connectors-on-resume-toggled(val) => { root.debug-force-disable-connectors-on-resume-toggled(val); }
                        strict-new-window-focus-toggled(val) => { root.debug-strict-new-window-focus-toggled(val); }
                        honor-xdg-activation-with-invalid-serial-toggled(val) => { root.debug-honor-xdg-activation-with-invalid-serial-toggled(val); }
                        deactivate-unfocused-windows-toggled(val) => { root.debug-deactivate-unfocused-windows-toggled(val); }
                        force-pipewire-invalid-modifier-toggled(val) => { root.debug-force-pipewire-invalid-modifier-toggled(val); }
                    }

                    // Switch events page
                    if selected-category == SidebarIndices.switch-events: SwitchEventsPage {
                        lid-close-commands <=> root.switch-lid-close-commands;
                        lid-close-selected <=> root.switch-lid-close-selected;
                        lid-close-current <=> root.switch-lid-close-current;
                        lid-open-commands <=> root.switch-lid-open-commands;
                        lid-open-selected <=> root.switch-lid-open-selected;
                        lid-open-current <=> root.switch-lid-open-current;
                        tablet-mode-on-commands <=> root.switch-tablet-mode-on-commands;
                        tablet-mode-on-selected <=> root.switch-tablet-mode-on-selected;
                        tablet-mode-on-current <=> root.switch-tablet-mode-on-current;
                        tablet-mode-off-commands <=> root.switch-tablet-mode-off-commands;
                        tablet-mode-off-selected <=> root.switch-tablet-mode-off-selected;
                        tablet-mode-off-current <=> root.switch-tablet-mode-off-current;

                        lid-close-add => { root.switch-lid-close-add(); }
                        lid-close-remove(idx) => { root.switch-lid-close-remove(idx); }
                        lid-close-select(idx) => { root.switch-lid-close-select(idx); }
                        lid-close-changed(val) => { root.switch-lid-close-changed(val); }
                        lid-open-add => { root.switch-lid-open-add(); }
                        lid-open-remove(idx) => { root.switch-lid-open-remove(idx); }
                        lid-open-select(idx) => { root.switch-lid-open-select(idx); }
                        lid-open-changed(val) => { root.switch-lid-open-changed(val); }
                        tablet-mode-on-add => { root.switch-tablet-mode-on-add(); }
                        tablet-mode-on-remove(idx) => { root.switch-tablet-mode-on-remove(idx); }
                        tablet-mode-on-select(idx) => { root.switch-tablet-mode-on-select(idx); }
                        tablet-mode-on-changed(val) => { root.switch-tablet-mode-on-changed(val); }
                        tablet-mode-off-add => { root.switch-tablet-mode-off-add(); }
                        tablet-mode-off-remove(idx) => { root.switch-tablet-mode-off-remove(idx); }
                        tablet-mode-off-select(idx) => { root.switch-tablet-mode-off-select(idx); }
                        tablet-mode-off-changed(val) => { root.switch-tablet-mode-off-changed(val); }
                    }

                    // Recent windows page (v25.05+)
                    if selected-category == SidebarIndices.recent-windows: RecentWindowsPage {
                        enabled <=> root.recent-windows-enabled;
                        debounce-ms <=> root.recent-windows-debounce-ms;
                        open-delay-ms <=> root.recent-windows-open-delay-ms;
                        highlight-active-color <=> root.recent-windows-highlight-active-color;
                        highlight-active-color-hex <=> root.recent-windows-highlight-active-color-hex;
                        highlight-urgent-color <=> root.recent-windows-highlight-urgent-color;
                        highlight-urgent-color-hex <=> root.recent-windows-highlight-urgent-color-hex;
                        highlight-padding <=> root.recent-windows-highlight-padding;
                        highlight-corner-radius <=> root.recent-windows-highlight-corner-radius;
                        previews-max-height <=> root.recent-windows-previews-max-height;
                        previews-max-scale <=> root.recent-windows-previews-max-scale;

                        enabled-toggled(val) => { root.recent-windows-enabled-toggled(val); }
                        debounce-ms-changed(val) => { root.recent-windows-debounce-ms-changed(val); }
                        open-delay-ms-changed(val) => { root.recent-windows-open-delay-ms-changed(val); }
                        highlight-active-color-changed(col) => { root.recent-windows-highlight-active-color-changed(col); }
                        highlight-urgent-color-changed(col) => { root.recent-windows-highlight-urgent-color-changed(col); }
                        highlight-padding-changed(val) => { root.recent-windows-highlight-padding-changed(val); }
                        highlight-corner-radius-changed(val) => { root.recent-windows-highlight-corner-radius-changed(val); }
                        previews-max-height-changed(val) => { root.recent-windows-previews-max-height-changed(val); }
                        previews-max-scale-changed(val) => { root.recent-windows-previews-max-scale-changed(val); }
            }

                    // 
                    // TOOLS PAGE (category 26)
                    // 
                    if selected-category == SidebarIndices.tools: ToolsPage {
                        niri-running: root.niri-running;
                        output-text <=> root.tools-output;
                        last-action <=> root.tools-last-action;

                        list-windows-requested => { root.tools-list-windows(); }
                        list-workspaces-requested => { root.tools-list-workspaces(); }
                        list-outputs-requested => { root.tools-list-outputs(); }
                        focused-window-requested => { root.tools-focused-window(); }
                        focused-output-requested => { root.tools-focused-output(); }
                        reload-config-requested => { root.tools-reload-config(); }
                    }

                    // 
                    // CONFIG EDITOR PAGE (category 27)
                    // 
                    if selected-category == SidebarIndices.config-editor: ConfigEditorPage {
                        file-content <=> root.config-editor-content;
                        selected-file-index <=> root.config-editor-file-index;

                        load-file-requested(idx) => { root.config-editor-load-file(idx); }
                        refresh-requested => { root.config-editor-refresh(); }
                    }

                    // 
                    // BACKUPS PAGE (category 28)
                    // 
                    if selected-category == SidebarIndices.backups: BackupsPage {
                        backup-list <=> root.backup-list;
                        selected-backup-index <=> root.backup-selected-index;
                        preview-content <=> root.backup-preview;
                        status-message <=> root.backup-status;
                        has-backups <=> root.backup-has-backups;

                        refresh-requested => { root.backup-refresh(); }
                        preview-requested(idx) => { root.backup-preview-requested(idx); }
                        restore-requested(idx) => { root.backup-restore-requested(idx); }
                    }
        }  // Close Rectangle (content panel)

        // Bottom bar
        Rectangle {
            height: Theme.footer-height;
            background: Theme.sidebar-background;

            HorizontalLayout {
                padding: Theme.spacing-sm;
                spacing: Theme.spacing-sm;

                // Status text
                Text {
                    text: "Changes saved automatically";
                    color: Theme.text-muted;
                    font-size: Theme.font-size-sm;
                    vertical-alignment: center;
                    horizontal-stretch: 1;
                    accessible-role: text;
                    accessible-label: "Status: Changes saved automatically";
                }

                // Close button
                Button {
                    text: "Close";
                    accessible-label: "Close settings window";
                    accessible-description: "Close the application and save settings";
                    clicked => {
                        close-requested();
                    }
                }
            }
        }
    }

    // Search results overlay (positioned below CategoryNav + search bar)
    if show-search-results && search-results.length > 0: SearchResultsPanel {
        x: Theme.spacing-xl;
        y: 158px;  // CategoryNav (110px) + search bar (48px)
        width: root.width - Theme.spacing-xl * 2;
        results: search-results;
        accent-color: category-accent;

        result-selected(category) => {
            // Delegate to Rust handler which will set properties from outside
            // This avoids reactivity issues with setting properties from inside
            // a conditionally-rendered component's callback
            search-result-selected(category);
        }
    }

    // First-run wizard overlay
    FirstRunWizard {
        show-wizard: wizard-visible;
        current-step <=> wizard-step;
        has-include-line: root.has-include-line;
        config-path: root.config-path;
        include-line: root.include-line;
        import-summary: root.import-summary;
        has-imports: root.has-imports;

        wizard-completed => { root.wizard-completed(); }
        wizard-cancelled => { root.wizard-cancelled(); }
        add-include-line-requested => { root.add-include-line-requested(); }
    }

    // Error dialog overlay
    MessageDialog {
        show-dialog: error-dialog-visible;
        title: error-title;
        message: error-message;
        details: error-details;
        dialog-type: DialogType.Error;

        dismissed => { root.error-dismissed(); }
    }

    // Status notification (auto-dismiss timer handled in Rust)
    StatusNotification {
        show-notification: status-visible;
        message: status-message;
        notification-type: status-is-error ? DialogType.Error : DialogType.Success;

        dismissed => { root.status-visible = false; }
    }

    // Import summary dialog (shown after first-run if there are warnings)
    ImportSummaryDialog {
        show-dialog: show-import-details;
        imported-count: import-count;
        defaulted-count: import-defaulted-count;
        includes-processed: import-includes-count;
        warnings: import-warnings;

        dismissed => { root.show-import-details = false; }
    }

    // Config diff view dialog
    DiffViewDialog {
        show-dialog: root.diff-view-visible;
        categories: root.diff-categories;
        total-additions: root.diff-total-additions;
        total-deletions: root.diff-total-deletions;

        save-now => { root.diff-save-now(); }
        discard-all => { root.diff-discard-all(); }
        close-dialog => { root.diff-close(); }
    }

    // Consolidation suggestions dialog (shown after import if similar rules detected)
    ConsolidationDialog {
        show-dialog: root.show-consolidation-dialog;
        suggestions: root.consolidation-suggestions;
        total-affected-rules: root.consolidation-affected-rules;

        dismissed => { root.consolidation-dismissed(); }
        apply-selected => { root.consolidation-apply-selected(); }
        suggestion-toggled(index, selected) => { root.consolidation-suggestion-toggled(index, selected); }
    }
}

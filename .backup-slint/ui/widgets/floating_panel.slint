// Floating panel component for Control Deck design
//
// Creates a floating card with accent line and optional shadow depth.
// Used as containers for settings sections.

import { Theme } from "../styles.slint";

// Floating panel with left accent line
export component FloatingPanel inherits Rectangle {
    in property <string> title: "";
    in property <color> accent-color: Theme.accent;
    in property <bool> show-title: true;

    background: Theme.card-background;
    border-radius: Theme.radius-lg;

    // Left accent line
    Rectangle {
        x: 0;
        y: 0;
        width: Theme.accent-line-width;
        height: parent.height;
        background: accent-color;
        border-top-left-radius: Theme.radius-lg;
        border-bottom-left-radius: Theme.radius-lg;
    }

    VerticalLayout {
        padding: Theme.panel-padding;
        padding-left: Theme.panel-padding + Theme.accent-line-width;
        spacing: Theme.spacing-md;

        if show-title && title != "": Text {
            text: title;
            color: accent-color;
            font-size: Theme.font-size-sm;
            font-weight: 600;
            letter-spacing: 1px;
        }

        @children
    }
}

// Section divider within a panel
export component PanelDivider inherits Rectangle {
    height: 1px;
    background: Theme.border;
}

// Tree-line container for nested settings
export component TreeLineRow inherits Rectangle {
    in property <bool> is-last: false;
    in property <bool> show-line: true;

    background: transparent;
    min-height: Theme.row-height-compact;

    HorizontalLayout {
        spacing: 0;

        // Tree line connector
        if show-line: Rectangle {
            width: Theme.tree-indent;
            background: transparent;

            // Vertical line
            Rectangle {
                x: 8px;
                y: 0;
                width: Theme.tree-line-width;
                height: is-last ? parent.height / 2 : parent.height;
                background: Theme.tree-line-color;
            }

            // Horizontal connector
            Rectangle {
                x: 8px;
                y: parent.height / 2 - Theme.tree-line-width / 2;
                width: Theme.tree-indent - 8px - 4px;
                height: Theme.tree-line-width;
                background: Theme.tree-line-color;
            }
        }

        // Content area
        Rectangle {
            horizontal-stretch: 1;
            @children
        }
    }
}

// Subsection header within a panel
export component SubsectionHeader inherits Rectangle {
    in property <string> title;
    in property <color> accent-color: Theme.text-secondary;

    height: 32px;
    background: transparent;

    HorizontalLayout {
        alignment: start;
        spacing: Theme.spacing-sm;

        // Small accent dot
        Rectangle {
            width: 6px;
            height: 6px;
            background: accent-color;
            border-radius: 3px;
            y: (parent.height - self.height) / 2;
        }

        Text {
            text: title;
            color: Theme.text-secondary;
            font-size: Theme.font-size-sm;
            font-weight: 500;
            vertical-alignment: center;
        }
    }
}
